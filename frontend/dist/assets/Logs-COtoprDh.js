import{c as p,j as e,U as g,V as h,b,W as f,Y as j,Z as v,P as N,$ as y,a0 as L}from"./index-sTRvpPgw.js";import{c as r,b as n}from"./recharts-CHDYrIv-.js";import{u as w}from"./usePolling-CTxkEuwk.js";import{P as k,a as M,C}from"./PageLayout-BQJ_yv_k.js";import{C as S}from"./circle-QZnN0_2c.js";import{R as I}from"./refresh-cw-ek0M7CpN.js";import{I as F}from"./info-Df5v48vl.js";import{L as E}from"./loader-circle-DfFe1jXr.js";import"./maplibre-gl-Cg9ukl_k.js";/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D=[["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M14 7a4 4 0 0 1 4 4v3a6 6 0 0 1-12 0v-3a4 4 0 0 1 4-4z",key:"uouzyp"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M21 21a4 4 0 0 0-3.81-4",key:"1b0z45"}],["path",{d:"M21 5a4 4 0 0 1-3.55 3.97",key:"5cxbf6"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M3 21a4 4 0 0 1 3.81-4",key:"1fjd4g"}],["path",{d:"M3 5a4 4 0 0 0 3.55 3.97",key:"1d7oge"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M9 7.13V6a3 3 0 1 1 6 0v1.13",key:"1vgav8"}]],P=p("bug",D);function x({className:a,style:s}){return e.jsx("div",{className:r("animate-pulse bg-white/[0.06] rounded",a),style:s})}function R(){return e.jsx("div",{className:"p-3 rounded-lg border border-border-subtle bg-bg-subtle",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(x,{className:"w-14 h-6 rounded shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0 space-y-2",children:[e.jsx(x,{className:"h-4 w-full"}),e.jsx(x,{className:"h-4 w-3/4"}),e.jsx(x,{className:"h-3 w-32 mt-1"})]})]})})}function T({count:a=8}){return e.jsx("div",{className:"space-y-2",children:Array.from({length:a}).map((s,t)=>e.jsx(R,{},t))})}const B=n.memo(function({log:s}){const t=L(s.level);return e.jsx("div",{className:r("p-3 rounded-lg border bg-bg-subtle",t),children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:r("px-2 py-0.5 rounded text-xs font-medium border shrink-0",t),children:s.level}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-text-secondary break-words whitespace-pre-wrap",children:s.message}),e.jsx("p",{className:"text-xs text-text-muted mt-1",children:new Date(s.timestamp).toLocaleString()})]})]})})});function G(){const a=g(),[s,t]=n.useState("INFO"),[l,m]=n.useState(!1),[i,o]=n.useState(null);n.useEffect(()=>{if(a.length>0){const d=a.some(c=>c.level==="DEBUG");t(d?"DEBUG":"INFO")}},[a]);const u=n.useCallback(async d=>{if(!(d===s||l)){m(!0),o(null);try{const c=await y(d);c.success&&c.data?(t(d),o(c.data.message),setTimeout(()=>o(null),5e3)):(o(c.error||"Failed to change log level"),setTimeout(()=>o(null),3e3))}catch{o("Failed to change log level"),setTimeout(()=>o(null),3e3)}finally{m(!1)}}},[s,l]);return e.jsxs("div",{className:"flex items-center gap-2",children:[i&&e.jsx("span",{className:"text-xs text-text-muted animate-pulse",children:i}),e.jsxs("div",{className:"flex rounded-lg border border-border-subtle overflow-hidden",children:[e.jsxs("button",{onClick:()=>u("INFO"),disabled:l,className:r("px-3 py-1.5 sm:px-4 sm:py-2 text-sm font-medium flex items-center gap-2 transition-colors",s==="INFO"?"bg-accent-primary/20 text-accent-primary border-accent-primary/30":"bg-bg-subtle text-text-muted hover:bg-bg-elevated",l&&"opacity-50 cursor-not-allowed"),children:[e.jsx(F,{className:"w-4 h-4"}),"INFO"]}),e.jsxs("button",{onClick:()=>u("DEBUG"),disabled:l,className:r("px-3 py-1.5 sm:px-4 sm:py-2 text-sm font-medium flex items-center gap-2 transition-colors border-l border-border-subtle",s==="DEBUG"?"bg-amber-500/20 text-amber-400 border-amber-500/30":"bg-bg-subtle text-text-muted hover:bg-bg-elevated",l&&"opacity-50 cursor-not-allowed"),children:[l?e.jsx(E,{className:"w-4 h-4 animate-spin"}):e.jsx(P,{className:"w-4 h-4"}),"DEBUG"]})]})]})}function W(){const a=g(),s=h(),t=b(),l=f(),m=j();return w(l,N.logs,t),e.jsxs(k,{children:[e.jsx(M,{title:"System Logs",icon:e.jsx(v,{}),controls:e.jsxs(e.Fragment,{children:[e.jsx(G,{}),t&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(S,{className:"w-2 h-2 fill-accent-success text-accent-success animate-pulse"}),e.jsx("span",{className:"text-text-muted",children:"Live"})]}),e.jsxs("button",{onClick:()=>m(!t),className:r("px-3 py-1.5 sm:px-4 sm:py-2 rounded-lg text-sm font-medium transition-colors","flex items-center gap-2 border",t?"bg-accent-success/20 text-accent-success border-accent-success/30":"bg-bg-subtle text-text-muted border-border-subtle hover:bg-bg-elevated"),children:[e.jsx(I,{className:r("w-4 h-4",t&&"animate-spin")}),e.jsx("span",{className:"hidden xs:inline",children:t?"Live":"Paused"})]})]})}),e.jsx(C,{children:e.jsx("div",{className:"space-y-2 max-h-[calc(100vh-300px)] sm:max-h-[calc(100vh-250px)] overflow-y-auto font-mono text-sm",children:s&&a.length===0?e.jsx(T,{count:10}):a.length===0?e.jsx("div",{className:"text-center py-12 text-text-muted",children:"No logs available"}):a.map((i,o)=>e.jsx(B,{log:i},`${i.timestamp}-${o}`))})})]})}export{W as default};
