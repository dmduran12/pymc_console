import{c as C,O as F,Q as O,T as A,P as N,j as e}from"./index-CTlx_9BZ.js";import{b as u,c as S,d as G,A as $,C as P,X as T,Y as D,T as E,j as U,f as _}from"./recharts-CHDYrIv-.js";import{P as H,a as B,C as y,G as I,b as k}from"./PageLayout-Do22h3d2.js";import{R as W}from"./refresh-cw-tapPfUGc.js";import{A as M}from"./activity-CCM3lL4z.js";import"./maplibre-gl-Cg9ukl_k.js";/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]],K=C("cpu",z);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]],V=C("hard-drive",Y);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=[["path",{d:"M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z",key:"17jzev"}]],q=C("thermometer",X),J={primary:"bg-accent-tertiary",secondary:"bg-accent-secondary",green:"bg-accent-success",red:"bg-accent-danger",yellow:"bg-accent-secondary"},Q=u.memo(function({value:s,max:l=100,color:r="primary"}){const n=Math.min(s/l*100,100),d=J[r],o=n>90?"bg-accent-danger":n>70?"bg-accent-secondary":d;return e.jsx("div",{className:"h-2.5 bg-white/10 rounded-full overflow-hidden",children:e.jsx("div",{className:S("h-full rounded-full",o),style:{width:`${n}%`}})})}),x={cold:30,normal:50,warm:65,hot:80},R=u.memo(function({value:s,label:l,min:r=20,max:n=100}){const d=Math.min(Math.max((s-r)/(n-r)*100,0),100),i=s<x.cold?{text:"Cool",bg:"bg-accent-tertiary/20",text_color:"text-accent-tertiary",border:"border-accent-tertiary/30"}:s<x.normal?{text:"Normal",bg:"bg-accent-success/20",text_color:"text-accent-success",border:"border-accent-success/30"}:s<x.warm?{text:"Warm",bg:"bg-accent-secondary/20",text_color:"text-accent-secondary",border:"border-accent-secondary/30"}:s<x.hot?{text:"Hot",bg:"bg-signal-poor/20",text_color:"text-signal-poor",border:"border-signal-poor/30"}:{text:"DANGER",bg:"bg-accent-danger/20",text_color:"text-accent-danger",border:"border-accent-danger/30"},p=n-r,c={cold:(x.cold-r)/p*100,normal:(x.normal-r)/p*100,warm:(x.warm-r)/p*100,hot:(x.hot-r)/p*100},h=()=>`linear-gradient(to right, ${[{pos:0,color:"var(--accent-tertiary)"},{pos:c.cold,color:"var(--accent-tertiary)"},{pos:c.cold,color:"var(--accent-success)"},{pos:c.normal,color:"var(--accent-success)"},{pos:c.normal,color:"var(--accent-secondary)"},{pos:c.warm,color:"var(--accent-secondary)"},{pos:c.warm,color:"#f97316"},{pos:c.hot,color:"#f97316"},{pos:c.hot,color:"var(--accent-danger)"},{pos:100,color:"var(--accent-danger)"}].map(f=>{const g=d>0?f.pos/d*100:0;return`${f.color} ${Math.min(g,100)}%`}).join(", ")})`,w=`linear-gradient(to right,
    var(--accent-tertiary) 0%,
    var(--accent-tertiary) ${c.cold}%,
    var(--accent-success) ${c.cold}%,
    var(--accent-success) ${c.normal}%,
    var(--accent-secondary) ${c.normal}%,
    var(--accent-secondary) ${c.warm}%,
    #f97316 ${c.warm}%,
    #f97316 ${c.hot}%,
    var(--accent-danger) ${c.hot}%,
    var(--accent-danger) 100%
  )`;return e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-xs text-text-muted uppercase tracking-wide",children:l}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:S("px-1.5 text-[9px] font-semibold rounded-full border leading-[14px]",i.bg,i.text_color,i.border),children:i.text}),e.jsxs("span",{className:"text-sm font-semibold tabular-nums text-text-primary",children:[s.toFixed(1),"Â°"]})]})]}),e.jsxs("div",{className:"relative h-2.5 bg-white/5 rounded-full overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 opacity-15 rounded-full",style:{background:w}}),e.jsx("div",{className:"absolute inset-y-0 left-0 rounded-full transition-all duration-300 ease-out",style:{background:h(),width:`${d}%`}}),e.jsx("div",{className:"absolute inset-0 flex items-center pointer-events-none",children:[x.normal,x.warm,x.hot].map(a=>{const m=(a-r)/(n-r)*100;return m<0||m>100?null:e.jsx("div",{className:"absolute w-px h-1.5 bg-white/20",style:{left:`${m}%`}},a)})})]})]})}),b="#60A5FA",v="#F9D26F",Z=1200*1e3,j=Math.floor(Z/N.system);function ee({payload:t}){return t?e.jsx("div",{className:"flex items-center gap-4 justify-center text-xs font-mono",children:t.map((s,l)=>e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:"w-2 h-2 rounded-full",style:{backgroundColor:s.color}}),e.jsx("span",{className:"text-text-muted",children:s.value})]},l))}):null}function te({active:t,payload:s,label:l}){return!t||!s||s.length===0?null:e.jsxs("div",{className:"bg-bg-surface/95 backdrop-blur-sm border border-border-subtle rounded-lg px-3 py-2 text-sm",children:[e.jsx("div",{className:"font-medium text-text-primary mb-1",children:l}),s.map((r,n)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-2 rounded-full",style:{backgroundColor:r.color}}),e.jsxs("span",{className:"text-text-muted",children:[r.name,":"]}),e.jsxs("span",{className:"text-text-primary tabular-nums",children:[r.value.toFixed(1),"%"]})]},n))]})}function se(t){const s=[],l=Math.max(0,j-t.length),r=Date.now(),n=N.system;for(let o=0;o<l;o++){const i=r-(j-o)*n,p=new Date(i).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1});s.push({slot:o,time:p,cpu:null,memory:null})}const d=t.slice(-j);for(let o=0;o<d.length;o++){const i=d[o];s.push({slot:l+o,time:i.time.slice(0,5),cpu:i.cpu,memory:i.memory})}return s}const ae=u.memo(function({data:s}){const l=se(s),r=Math.floor(j/4);return s.length===0?e.jsx("div",{className:"h-48 flex items-center justify-center text-text-muted",children:"Collecting data..."}):e.jsx("div",{className:"h-48",children:e.jsx(G,{width:"100%",height:"100%",children:e.jsxs($,{data:l,children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"cpuGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:b,stopOpacity:.4}),e.jsx("stop",{offset:"95%",stopColor:b,stopOpacity:.05})]}),e.jsxs("linearGradient",{id:"memoryGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:v,stopOpacity:.4}),e.jsx("stop",{offset:"95%",stopColor:v,stopOpacity:.05})]})]}),e.jsx(P,{strokeDasharray:"3 3",stroke:"rgba(255,255,255,0.06)",vertical:!1}),e.jsx(T,{dataKey:"time",axisLine:!1,tickLine:!1,tick:{fill:"rgba(255,255,255,0.4)",fontSize:10,fontFamily:"'JetBrains Mono', monospace"},dy:8,interval:r}),e.jsx(D,{domain:[0,100],axisLine:!1,tickLine:!1,tick:{fill:"rgba(255,255,255,0.4)",fontSize:10},dx:-4,width:40,tickFormatter:n=>`${n}%`}),e.jsx(E,{content:e.jsx(te,{})}),e.jsx(U,{content:e.jsx(ee,{})}),e.jsx(_,{type:"stepAfter",dataKey:"cpu",name:"CPU",stroke:b,strokeWidth:2,fill:"url(#cpuGradient)",fillOpacity:.85,isAnimationActive:!1,connectNulls:!1}),e.jsx(_,{type:"stepAfter",dataKey:"memory",name:"Memory",stroke:v,strokeWidth:2,fill:"url(#memoryGradient)",fillOpacity:.85,isAnimationActive:!1,connectNulls:!1})]})})})});function de(){const[t,s]=u.useState(null),[l,r]=u.useState(!0),[n,d]=u.useState(null),[o,i]=u.useState(!1),p=F(),c=O(),h=u.useCallback(async()=>{try{const a=await A();a.success&&a.data?(s(a.data),d(null),c(a.data.cpu.usage_percent,a.data.memory.usage_percent,j)):d(a.error||"Failed to fetch hardware stats")}catch(a){d(a instanceof Error?a.message:"Failed to fetch hardware stats")}},[c]);u.useEffect(()=>{let a=!0,m=null;if((async()=>{a&&(await h(),a&&r(!1))})(),typeof Worker<"u"){const g=`
        const interval = ${N.system};
        setInterval(() => postMessage('tick'), interval);
      `,L=new Blob([g],{type:"application/javascript"});m=new Worker(URL.createObjectURL(L)),m.onmessage=()=>{a&&h()}}else{const g=setInterval(h,N.system);return()=>{a=!1,clearInterval(g)}}return()=>{a=!1,m&&m.terminate()}},[h]);const w=async()=>{i(!0),await h(),i(!1)};return e.jsxs(H,{children:[e.jsx(B,{title:"System Stats",icon:e.jsx(K,{}),controls:e.jsxs("button",{onClick:w,disabled:o,className:"flex items-center gap-2 px-3 py-1.5 sm:px-4 sm:py-2 bg-bg-subtle hover:bg-bg-elevated rounded-lg transition-colors text-sm text-text-muted hover:text-text-primary self-start sm:self-auto",children:[e.jsx(W,{className:S("w-4 h-4",o&&"animate-spin")}),"Refresh"]})}),n&&e.jsx(y,{className:"border border-accent-danger/50 bg-accent-danger/10",children:e.jsx("p",{className:"text-accent-danger",children:n})}),l?e.jsx(y,{className:"p-12 text-center",children:e.jsx("div",{className:"animate-pulse text-text-muted",children:"Loading system stats..."})}):t?e.jsxs(I,{children:[e.jsx(k,{children:e.jsxs(y,{children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 sm:gap-4 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 rounded-lg bg-accent-tertiary/20 flex items-center justify-center flex-shrink-0",children:e.jsx(M,{className:"w-4 h-4 sm:w-5 sm:h-5 text-accent-tertiary"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-sm sm:text-base font-medium text-text-primary",children:"System Resources"}),e.jsx("p",{className:"text-[10px] sm:text-xs text-text-muted",children:"20 minute rolling window"})]})]}),e.jsxs("div",{className:"flex items-center gap-4 sm:gap-6",children:[e.jsxs("div",{className:"flex items-center gap-2 sm:flex-col sm:items-end sm:gap-0",children:[e.jsx("span",{className:"text-[10px] sm:text-xs text-text-muted uppercase",children:"CPU"}),e.jsxs("div",{className:"text-base sm:text-lg font-semibold tabular-nums",style:{color:b},children:[t.cpu.usage_percent.toFixed(0),"%"]})]}),e.jsxs("div",{className:"flex items-center gap-2 sm:flex-col sm:items-end sm:gap-0",children:[e.jsx("span",{className:"text-[10px] sm:text-xs text-text-muted uppercase",children:"MEM"}),e.jsxs("div",{className:"text-base sm:text-lg font-semibold tabular-nums",style:{color:v},children:[t.memory.usage_percent.toFixed(0),"%"]})]})]})]}),e.jsx(ae,{data:p}),e.jsxs("div",{className:"flex items-center justify-between mt-3 pt-3 border-t border-border-subtle text-xs text-text-muted",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{children:[t.cpu.count," CPU cores"]}),t.cpu.load_avg&&e.jsxs("span",{className:"tabular-nums",children:["Load: ",t.cpu.load_avg["1min"].toFixed(2)," / ",t.cpu.load_avg["5min"].toFixed(2)," / ",t.cpu.load_avg["15min"].toFixed(2)]})]}),e.jsxs("span",{className:"tabular-nums",children:[(t.memory.used/(1024*1024)).toFixed(0)," / ",(t.memory.total/(1024*1024)).toFixed(0)," MB"]})]})]})}),e.jsx(k,{md:6,children:e.jsxs(y,{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-lg bg-accent-success/20 flex items-center justify-center",children:e.jsx(V,{className:"w-6 h-6 text-accent-success"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-medium text-text-primary",children:"Disk Usage"}),e.jsx("p",{className:"text-sm text-text-muted",children:"Storage utilization"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-text-muted",children:"Usage"}),e.jsxs("span",{className:"text-text-primary font-medium",children:[t.disk.usage_percent.toFixed(1),"%"]})]}),e.jsx(Q,{value:t.disk.usage_percent,color:"green"}),e.jsxs("div",{className:"flex justify-between text-sm mt-2",children:[e.jsxs("span",{className:"text-text-muted",children:[(t.disk.used/(1024*1024*1024)).toFixed(1)," GB used"]}),e.jsxs("span",{className:"text-text-muted",children:[(t.disk.total/(1024*1024*1024)).toFixed(1)," GB total"]})]})]})]})}),e.jsx(k,{md:6,children:e.jsxs(y,{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-accent-secondary/20 flex items-center justify-center",children:e.jsx(q,{className:"w-5 h-5 text-accent-secondary"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-base font-medium text-text-primary",children:"Temperature"}),e.jsx("p",{className:"text-xs text-text-muted",children:"System sensors"})]})]}),t.temperatures&&Object.keys(t.temperatures).length>0?e.jsxs("div",{className:"space-y-2.5",children:[t.temperatures.cpu_thermal!==void 0&&e.jsx(R,{value:t.temperatures.cpu_thermal,label:"CPU",min:20,max:100}),Object.entries(t.temperatures).filter(([a])=>a!=="cpu_thermal").slice(0,3).map(([a,m])=>e.jsx(R,{value:m,label:a.replace(/_/g," ").replace(/\b\w/g,f=>f.toUpperCase()),min:20,max:100},a))]}):e.jsxs("div",{className:"flex items-center justify-center h-20 text-text-muted text-sm",children:[e.jsx(M,{className:"w-4 h-4 mr-2"}),"No sensors available"]})]})})]}):null]})}export{de as default};
