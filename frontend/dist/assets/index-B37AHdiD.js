const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Dashboard-CSxt5VEV.js","assets/recharts-CHDYrIv-.js","assets/maplibre-gl-Cg9ukl_k.js","assets/TimeRangeSelector-JnNMvLOY.js","assets/PacketDetailModal-CIH5cOfZ.js","assets/SignalIndicator-BRQdv7-e.js","assets/HashBadge-CsSeJ4jR.js","assets/triangle-alert-CAX7rb0d.js","assets/circle-BQSSv77o.js","assets/trending-up-DEHAuP-Y.js","assets/zap-DXxfWxq8.js","assets/PageLayout-Bk77Qfbb.js","assets/house-CrJgKujc.js","assets/Packets-D34yCbQR.js","assets/usePolling-CTxkEuwk.js","assets/users-9S0Gcwmu.js","assets/refresh-cw-BGdR-336.js","assets/Contacts-CzxLMsvW.js","assets/activity-D23bJ_c3.js","assets/Statistics-DD7XviRR.js","assets/info-Bku3og1T.js","assets/System-7XaF83ds.js","assets/Logs-CtDl4GM6.js","assets/loader-circle-CSyrfutc.js","assets/Terminal-BEA-1vFi.js","assets/Settings-Bd21IKk-.js"])))=>i.map(i=>d[i]);
var Wt=Object.defineProperty;var zt=(e,t,n)=>t in e?Wt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var C=(e,t,n)=>zt(e,typeof t!="symbol"?t+"":t,n);import{r as qt,a as Vt,b as u,R as ie,c as T}from"./recharts-CHDYrIv-.js";import"./maplibre-gl-Cg9ukl_k.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(a){if(a.ep)return;a.ep=!0;const s=n(a);fetch(a.href,s)}})();var ge={exports:{}},ee={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ve;function Kt(){if(Ve)return ee;Ve=1;var e=qt(),t=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,a=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function o(l,d,c){var h,m={},f=null,p=null;c!==void 0&&(f=""+c),d.key!==void 0&&(f=""+d.key),d.ref!==void 0&&(p=d.ref);for(h in d)r.call(d,h)&&!s.hasOwnProperty(h)&&(m[h]=d[h]);if(l&&l.defaultProps)for(h in d=l.defaultProps,d)m[h]===void 0&&(m[h]=d[h]);return{$$typeof:t,type:l,key:f,ref:p,props:m,_owner:a.current}}return ee.Fragment=n,ee.jsx=o,ee.jsxs=o,ee}var Ke;function Jt(){return Ke||(Ke=1,ge.exports=Kt()),ge.exports}var i=Jt(),le={},Je;function Gt(){if(Je)return le;Je=1;var e=Vt();return le.createRoot=e.createRoot,le.hydrateRoot=e.hydrateRoot,le}var Yt=Gt();/**
 * react-router v7.10.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Ge="popstate";function Qt(e={}){function t(r,a){let{pathname:s,search:o,hash:l}=r.location;return Le("",{pathname:s,search:o,hash:l},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(r,a){return typeof a=="string"?a:re(a)}return Xt(t,n,null,e)}function L(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function M(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Zt(){return Math.random().toString(36).substring(2,10)}function Ye(e,t){return{usr:e.state,key:e.key,idx:t}}function Le(e,t,n=null,r){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?Y(t):t,state:n,key:t&&t.key||r||Zt()}}function re({pathname:e="/",search:t="",hash:n=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function Y(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function Xt(e,t,n,r={}){let{window:a=document.defaultView,v5Compat:s=!1}=r,o=a.history,l="POP",d=null,c=h();c==null&&(c=0,o.replaceState({...o.state,idx:c},""));function h(){return(o.state||{idx:null}).idx}function m(){l="POP";let y=h(),g=y==null?null:y-c;c=y,d&&d({action:l,location:w.location,delta:g})}function f(y,g){l="PUSH";let k=Le(w.location,y,g);c=h()+1;let x=Ye(k,c),v=w.createHref(k);try{o.pushState(x,"",v)}catch(E){if(E instanceof DOMException&&E.name==="DataCloneError")throw E;a.location.assign(v)}s&&d&&d({action:l,location:w.location,delta:1})}function p(y,g){l="REPLACE";let k=Le(w.location,y,g);c=h();let x=Ye(k,c),v=w.createHref(k);o.replaceState(x,"",v),s&&d&&d({action:l,location:w.location,delta:0})}function b(y){return en(y)}let w={get action(){return l},get location(){return e(a,o)},listen(y){if(d)throw new Error("A history only accepts one active listener");return a.addEventListener(Ge,m),d=y,()=>{a.removeEventListener(Ge,m),d=null}},createHref(y){return t(a,y)},createURL:b,encodeLocation(y){let g=b(y);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:f,replace:p,go(y){return o.go(y)}};return w}function en(e,t=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),L(n,"No window.location.(origin|href) available to create URL");let r=typeof e=="string"?e:re(e);return r=r.replace(/ $/,"%20"),!t&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function gt(e,t,n="/"){return tn(e,t,n,!1)}function tn(e,t,n,r){let a=typeof t=="string"?Y(t):t,s=U(a.pathname||"/",n);if(s==null)return null;let o=yt(e);nn(o);let l=null;for(let d=0;l==null&&d<o.length;++d){let c=fn(s);l=hn(o[d],c,r)}return l}function yt(e,t=[],n=[],r="",a=!1){let s=(o,l,d=a,c)=>{let h={relativePath:c===void 0?o.path||"":c,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};if(h.relativePath.startsWith("/")){if(!h.relativePath.startsWith(r)&&d)return;L(h.relativePath.startsWith(r),`Absolute route path "${h.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),h.relativePath=h.relativePath.slice(r.length)}let m=B([r,h.relativePath]),f=n.concat(h);o.children&&o.children.length>0&&(L(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${m}".`),yt(o.children,t,f,m,d)),!(o.path==null&&!o.index)&&t.push({path:m,score:un(m,o.index),routesMeta:f})};return e.forEach((o,l)=>{var d;if(o.path===""||!((d=o.path)!=null&&d.includes("?")))s(o,l);else for(let c of xt(o.path))s(o,l,!0,c)}),t}function xt(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,a=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return a?[s,""]:[s];let o=xt(r.join("/")),l=[];return l.push(...o.map(d=>d===""?s:[s,d].join("/"))),a&&l.push(...o),l.map(d=>e.startsWith("/")&&d===""?"/":d)}function nn(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:dn(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var rn=/^:[\w-]+$/,an=3,sn=2,on=1,ln=10,cn=-2,Qe=e=>e==="*";function un(e,t){let n=e.split("/"),r=n.length;return n.some(Qe)&&(r+=cn),t&&(r+=sn),n.filter(a=>!Qe(a)).reduce((a,s)=>a+(rn.test(s)?an:s===""?on:ln),r)}function dn(e,t){return e.length===t.length&&e.slice(0,-1).every((r,a)=>r===t[a])?e[e.length-1]-t[t.length-1]:0}function hn(e,t,n=!1){let{routesMeta:r}=e,a={},s="/",o=[];for(let l=0;l<r.length;++l){let d=r[l],c=l===r.length-1,h=s==="/"?t:t.slice(s.length)||"/",m=me({path:d.relativePath,caseSensitive:d.caseSensitive,end:c},h),f=d.route;if(!m&&c&&n&&!r[r.length-1].route.index&&(m=me({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},h)),!m)return null;Object.assign(a,m.params),o.push({params:a,pathname:B([s,m.pathname]),pathnameBase:bn(B([s,m.pathnameBase])),route:f}),m.pathnameBase!=="/"&&(s=B([s,m.pathnameBase]))}return o}function me(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=mn(e.path,e.caseSensitive,e.end),a=t.match(n);if(!a)return null;let s=a[0],o=s.replace(/(.)\/+$/,"$1"),l=a.slice(1);return{params:r.reduce((c,{paramName:h,isOptional:m},f)=>{if(h==="*"){let b=l[f]||"";o=s.slice(0,s.length-b.length).replace(/(.)\/+$/,"$1")}const p=l[f];return m&&!p?c[h]=void 0:c[h]=(p||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:e}}function mn(e,t=!1,n=!0){M(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let r=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,d)=>(r.push({paramName:l,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(r.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),r]}function fn(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return M(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function U(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}var pn=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,gn=e=>pn.test(e);function yn(e,t="/"){let{pathname:n,search:r="",hash:a=""}=typeof e=="string"?Y(e):e,s;if(n)if(gn(n))s=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),M(!1,`Pathnames cannot have embedded double slashes - normalizing ${o} -> ${n}`)}n.startsWith("/")?s=Ze(n.substring(1),"/"):s=Ze(n,t)}else s=t;return{pathname:s,search:kn(r),hash:wn(a)}}function Ze(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?n.length>1&&n.pop():a!=="."&&n.push(a)}),n.length>1?n.join("/"):"/"}function ye(e,t,n,r){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function xn(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function bt(e){let t=xn(e);return t.map((n,r)=>r===t.length-1?n.pathname:n.pathnameBase)}function kt(e,t,n,r=!1){let a;typeof e=="string"?a=Y(e):(a={...e},L(!a.pathname||!a.pathname.includes("?"),ye("?","pathname","search",a)),L(!a.pathname||!a.pathname.includes("#"),ye("#","pathname","hash",a)),L(!a.search||!a.search.includes("#"),ye("#","search","hash",a)));let s=e===""||a.pathname==="",o=s?"/":a.pathname,l;if(o==null)l=n;else{let m=t.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),m-=1;a.pathname=f.join("/")}l=m>=0?t[m]:"/"}let d=yn(a,l),c=o&&o!=="/"&&o.endsWith("/"),h=(s||o===".")&&n.endsWith("/");return!d.pathname.endsWith("/")&&(c||h)&&(d.pathname+="/"),d}var B=e=>e.join("/").replace(/\/\/+/g,"/"),bn=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),kn=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,wn=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function vn(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}function Sn(e){return e.map(t=>t.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var wt=["POST","PUT","PATCH","DELETE"];new Set(wt);var Cn=["GET",...wt];new Set(Cn);var Q=u.createContext(null);Q.displayName="DataRouter";var fe=u.createContext(null);fe.displayName="DataRouterState";u.createContext(!1);var vt=u.createContext({isTransitioning:!1});vt.displayName="ViewTransition";var En=u.createContext(new Map);En.displayName="Fetchers";var Ln=u.createContext(null);Ln.displayName="Await";var I=u.createContext(null);I.displayName="Navigation";var ae=u.createContext(null);ae.displayName="Location";var W=u.createContext({outlet:null,matches:[],isDataRoute:!1});W.displayName="Route";var _e=u.createContext(null);_e.displayName="RouteError";function Nn(e,{relative:t}={}){L(se(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=u.useContext(I),{hash:a,pathname:s,search:o}=oe(e,{relative:t}),l=s;return n!=="/"&&(l=s==="/"?n:B([n,s])),r.createHref({pathname:l,search:o,hash:a})}function se(){return u.useContext(ae)!=null}function K(){return L(se(),"useLocation() may be used only in the context of a <Router> component."),u.useContext(ae).location}var St="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Ct(e){u.useContext(I).static||u.useLayoutEffect(e)}function Rn(){let{isDataRoute:e}=u.useContext(W);return e?Bn():jn()}function jn(){L(se(),"useNavigate() may be used only in the context of a <Router> component.");let e=u.useContext(Q),{basename:t,navigator:n}=u.useContext(I),{matches:r}=u.useContext(W),{pathname:a}=K(),s=JSON.stringify(bt(r)),o=u.useRef(!1);return Ct(()=>{o.current=!0}),u.useCallback((d,c={})=>{if(M(o.current,St),!o.current)return;if(typeof d=="number"){n.go(d);return}let h=kt(d,JSON.parse(s),a,c.relative==="path");e==null&&t!=="/"&&(h.pathname=h.pathname==="/"?t:B([t,h.pathname])),(c.replace?n.replace:n.push)(h,c.state,c)},[t,n,s,a,e])}u.createContext(null);function oe(e,{relative:t}={}){let{matches:n}=u.useContext(W),{pathname:r}=K(),a=JSON.stringify(bt(n));return u.useMemo(()=>kt(e,JSON.parse(a),r,t==="path"),[e,a,r,t])}function _n(e,t){return Et(e,t)}function Et(e,t,n,r,a){var k;L(se(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=u.useContext(I),{matches:o}=u.useContext(W),l=o[o.length-1],d=l?l.params:{},c=l?l.pathname:"/",h=l?l.pathnameBase:"/",m=l&&l.route;{let x=m&&m.path||"";Lt(c,!m||x.endsWith("*")||x.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${x}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${x}"> to <Route path="${x==="/"?"*":`${x}/*`}">.`)}let f=K(),p;if(t){let x=typeof t=="string"?Y(t):t;L(h==="/"||((k=x.pathname)==null?void 0:k.startsWith(h)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${h}" but pathname "${x.pathname}" was given in the \`location\` prop.`),p=x}else p=f;let b=p.pathname||"/",w=b;if(h!=="/"){let x=h.replace(/^\//,"").split("/");w="/"+b.replace(/^\//,"").split("/").slice(x.length).join("/")}let y=gt(e,{pathname:w});M(m||y!=null,`No routes matched location "${p.pathname}${p.search}${p.hash}" `),M(y==null||y[y.length-1].route.element!==void 0||y[y.length-1].route.Component!==void 0||y[y.length-1].route.lazy!==void 0,`Matched leaf route at location "${p.pathname}${p.search}${p.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let g=An(y&&y.map(x=>Object.assign({},x,{params:Object.assign({},d,x.params),pathname:B([h,s.encodeLocation?s.encodeLocation(x.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?h:B([h,s.encodeLocation?s.encodeLocation(x.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:x.pathnameBase])})),o,n,r,a);return t&&g?u.createElement(ae.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...p},navigationType:"POP"}},g):g}function Pn(){let e=Hn(),t=vn(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:r},s={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",e),o=u.createElement(u.Fragment,null,u.createElement("p",null,"ðŸ’¿ Hey developer ðŸ‘‹"),u.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",u.createElement("code",{style:s},"ErrorBoundary")," or"," ",u.createElement("code",{style:s},"errorElement")," prop on your route.")),u.createElement(u.Fragment,null,u.createElement("h2",null,"Unexpected Application Error!"),u.createElement("h3",{style:{fontStyle:"italic"}},t),n?u.createElement("pre",{style:a},n):null,o)}var Tn=u.createElement(Pn,null),Mn=class extends u.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.onError?this.props.onError(e,t):console.error("React Router caught the following error during render",e)}render(){return this.state.error!==void 0?u.createElement(W.Provider,{value:this.props.routeContext},u.createElement(_e.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function In({routeContext:e,match:t,children:n}){let r=u.useContext(Q);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),u.createElement(W.Provider,{value:e},n)}function An(e,t=[],n=null,r=null,a=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let s=e,o=n==null?void 0:n.errors;if(o!=null){let h=s.findIndex(m=>m.route.id&&(o==null?void 0:o[m.route.id])!==void 0);L(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),s=s.slice(0,Math.min(s.length,h+1))}let l=!1,d=-1;if(n)for(let h=0;h<s.length;h++){let m=s[h];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(d=h),m.route.id){let{loaderData:f,errors:p}=n,b=m.route.loader&&!f.hasOwnProperty(m.route.id)&&(!p||p[m.route.id]===void 0);if(m.route.lazy||b){l=!0,d>=0?s=s.slice(0,d+1):s=[s[0]];break}}}let c=n&&r?(h,m)=>{var f,p;r(h,{location:n.location,params:((p=(f=n.matches)==null?void 0:f[0])==null?void 0:p.params)??{},unstable_pattern:Sn(n.matches),errorInfo:m})}:void 0;return s.reduceRight((h,m,f)=>{let p,b=!1,w=null,y=null;n&&(p=o&&m.route.id?o[m.route.id]:void 0,w=m.route.errorElement||Tn,l&&(d<0&&f===0?(Lt("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),b=!0,y=null):d===f&&(b=!0,y=m.route.hydrateFallbackElement||null)));let g=t.concat(s.slice(0,f+1)),k=()=>{let x;return p?x=w:b?x=y:m.route.Component?x=u.createElement(m.route.Component,null):m.route.element?x=m.route.element:x=h,u.createElement(In,{match:m,routeContext:{outlet:h,matches:g,isDataRoute:n!=null},children:x})};return n&&(m.route.ErrorBoundary||m.route.errorElement||f===0)?u.createElement(Mn,{location:n.location,revalidation:n.revalidation,component:w,error:p,children:k(),routeContext:{outlet:null,matches:g,isDataRoute:!0},onError:c}):k()},null)}function Pe(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Dn(e){let t=u.useContext(Q);return L(t,Pe(e)),t}function $n(e){let t=u.useContext(fe);return L(t,Pe(e)),t}function On(e){let t=u.useContext(W);return L(t,Pe(e)),t}function Te(e){let t=On(e),n=t.matches[t.matches.length-1];return L(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function Fn(){return Te("useRouteId")}function Hn(){var r;let e=u.useContext(_e),t=$n("useRouteError"),n=Te("useRouteError");return e!==void 0?e:(r=t.errors)==null?void 0:r[n]}function Bn(){let{router:e}=Dn("useNavigate"),t=Te("useNavigate"),n=u.useRef(!1);return Ct(()=>{n.current=!0}),u.useCallback(async(a,s={})=>{M(n.current,St),n.current&&(typeof a=="number"?await e.navigate(a):await e.navigate(a,{fromRouteId:t,...s}))},[e,t])}var Xe={};function Lt(e,t,n){!t&&!Xe[e]&&(Xe[e]=!0,M(!1,n))}u.memo(Un);function Un({routes:e,future:t,state:n,unstable_onError:r}){return Et(e,void 0,n,r,t)}function H(e){L(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Wn({basename:e="/",children:t=null,location:n,navigationType:r="POP",navigator:a,static:s=!1,unstable_useTransitions:o}){L(!se(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=e.replace(/^\/*/,"/"),d=u.useMemo(()=>({basename:l,navigator:a,static:s,unstable_useTransitions:o,future:{}}),[l,a,s,o]);typeof n=="string"&&(n=Y(n));let{pathname:c="/",search:h="",hash:m="",state:f=null,key:p="default"}=n,b=u.useMemo(()=>{let w=U(c,l);return w==null?null:{location:{pathname:w,search:h,hash:m,state:f,key:p},navigationType:r}},[l,c,h,m,f,p,r]);return M(b!=null,`<Router basename="${l}"> is not able to match the URL "${c}${h}${m}" because it does not start with the basename, so the <Router> won't render anything.`),b==null?null:u.createElement(I.Provider,{value:d},u.createElement(ae.Provider,{children:t,value:b}))}function zn({children:e,location:t}){return _n(Ne(e),t)}function Ne(e,t=[]){let n=[];return u.Children.forEach(e,(r,a)=>{if(!u.isValidElement(r))return;let s=[...t,a];if(r.type===u.Fragment){n.push.apply(n,Ne(r.props.children,s));return}L(r.type===H,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),L(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Ne(r.props.children,s)),n.push(o)}),n}var de="get",he="application/x-www-form-urlencoded";function pe(e){return typeof HTMLElement<"u"&&e instanceof HTMLElement}function qn(e){return pe(e)&&e.tagName.toLowerCase()==="button"}function Vn(e){return pe(e)&&e.tagName.toLowerCase()==="form"}function Kn(e){return pe(e)&&e.tagName.toLowerCase()==="input"}function Jn(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Gn(e,t){return e.button===0&&(!t||t==="_self")&&!Jn(e)}var ce=null;function Yn(){if(ce===null)try{new FormData(document.createElement("form"),0),ce=!1}catch{ce=!0}return ce}var Qn=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function xe(e){return e!=null&&!Qn.has(e)?(M(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${he}"`),null):e}function Zn(e,t){let n,r,a,s,o;if(Vn(e)){let l=e.getAttribute("action");r=l?U(l,t):null,n=e.getAttribute("method")||de,a=xe(e.getAttribute("enctype"))||he,s=new FormData(e)}else if(qn(e)||Kn(e)&&(e.type==="submit"||e.type==="image")){let l=e.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=e.getAttribute("formaction")||l.getAttribute("action");if(r=d?U(d,t):null,n=e.getAttribute("formmethod")||l.getAttribute("method")||de,a=xe(e.getAttribute("formenctype"))||xe(l.getAttribute("enctype"))||he,s=new FormData(l,e),!Yn()){let{name:c,type:h,value:m}=e;if(h==="image"){let f=c?`${c}.`:"";s.append(`${f}x`,"0"),s.append(`${f}y`,"0")}else c&&s.append(c,m)}}else{if(pe(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=de,r=null,a=he,o=e}return s&&a==="text/plain"&&(o=s,s=void 0),{action:r,method:n.toLowerCase(),encType:a,formData:s,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Me(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Xn(e,t,n){let r=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return r.pathname==="/"?r.pathname=`_root.${n}`:t&&U(r.pathname,t)==="/"?r.pathname=`${t.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function er(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function tr(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function nr(e,t,n){let r=await Promise.all(e.map(async a=>{let s=t.routes[a.route.id];if(s){let o=await er(s,n);return o.links?o.links():[]}return[]}));return or(r.flat(1).filter(tr).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function et(e,t,n,r,a,s){let o=(d,c)=>n[c]?d.route.id!==n[c].route.id:!0,l=(d,c)=>{var h;return n[c].pathname!==d.pathname||((h=n[c].route.path)==null?void 0:h.endsWith("*"))&&n[c].params["*"]!==d.params["*"]};return s==="assets"?t.filter((d,c)=>o(d,c)||l(d,c)):s==="data"?t.filter((d,c)=>{var m;let h=r.routes[d.route.id];if(!h||!h.hasLoader)return!1;if(o(d,c)||l(d,c))return!0;if(d.route.shouldRevalidate){let f=d.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((m=n[0])==null?void 0:m.params)||{},nextUrl:new URL(e,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof f=="boolean")return f}return!0}):[]}function rr(e,t,{includeHydrateFallback:n}={}){return ar(e.map(r=>{let a=t.routes[r.route.id];if(!a)return[];let s=[a.module];return a.clientActionModule&&(s=s.concat(a.clientActionModule)),a.clientLoaderModule&&(s=s.concat(a.clientLoaderModule)),n&&a.hydrateFallbackModule&&(s=s.concat(a.hydrateFallbackModule)),a.imports&&(s=s.concat(a.imports)),s}).flat(1))}function ar(e){return[...new Set(e)]}function sr(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}function or(e,t){let n=new Set;return new Set(t),e.reduce((r,a)=>{let s=JSON.stringify(sr(a));return n.has(s)||(n.add(s),r.push({key:s,link:a})),r},[])}function Nt(){let e=u.useContext(Q);return Me(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function ir(){let e=u.useContext(fe);return Me(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var Ie=u.createContext(void 0);Ie.displayName="FrameworkContext";function Rt(){let e=u.useContext(Ie);return Me(e,"You must render this element inside a <HydratedRouter> element"),e}function lr(e,t){let n=u.useContext(Ie),[r,a]=u.useState(!1),[s,o]=u.useState(!1),{onFocus:l,onBlur:d,onMouseEnter:c,onMouseLeave:h,onTouchStart:m}=t,f=u.useRef(null);u.useEffect(()=>{if(e==="render"&&o(!0),e==="viewport"){let w=g=>{g.forEach(k=>{o(k.isIntersecting)})},y=new IntersectionObserver(w,{threshold:.5});return f.current&&y.observe(f.current),()=>{y.disconnect()}}},[e]),u.useEffect(()=>{if(r){let w=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(w)}}},[r]);let p=()=>{a(!0)},b=()=>{a(!1),o(!1)};return n?e!=="intent"?[s,f,{}]:[s,f,{onFocus:te(l,p),onBlur:te(d,b),onMouseEnter:te(c,p),onMouseLeave:te(h,b),onTouchStart:te(m,p)}]:[!1,f,{}]}function te(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function cr({page:e,...t}){let{router:n}=Nt(),r=u.useMemo(()=>gt(n.routes,e,n.basename),[n.routes,e,n.basename]);return r?u.createElement(dr,{page:e,matches:r,...t}):null}function ur(e){let{manifest:t,routeModules:n}=Rt(),[r,a]=u.useState([]);return u.useEffect(()=>{let s=!1;return nr(e,t,n).then(o=>{s||a(o)}),()=>{s=!0}},[e,t,n]),r}function dr({page:e,matches:t,...n}){let r=K(),{manifest:a,routeModules:s}=Rt(),{basename:o}=Nt(),{loaderData:l,matches:d}=ir(),c=u.useMemo(()=>et(e,t,d,a,r,"data"),[e,t,d,a,r]),h=u.useMemo(()=>et(e,t,d,a,r,"assets"),[e,t,d,a,r]),m=u.useMemo(()=>{if(e===r.pathname+r.search+r.hash)return[];let b=new Set,w=!1;if(t.forEach(g=>{var x;let k=a.routes[g.route.id];!k||!k.hasLoader||(!c.some(v=>v.route.id===g.route.id)&&g.route.id in l&&((x=s[g.route.id])!=null&&x.shouldRevalidate)||k.hasClientLoader?w=!0:b.add(g.route.id))}),b.size===0)return[];let y=Xn(e,o,"data");return w&&b.size>0&&y.searchParams.set("_routes",t.filter(g=>b.has(g.route.id)).map(g=>g.route.id).join(",")),[y.pathname+y.search]},[o,l,r,a,c,t,e,s]),f=u.useMemo(()=>rr(h,a),[h,a]),p=ur(h);return u.createElement(u.Fragment,null,m.map(b=>u.createElement("link",{key:b,rel:"prefetch",as:"fetch",href:b,...n})),f.map(b=>u.createElement("link",{key:b,rel:"modulepreload",href:b,...n})),p.map(({key:b,link:w})=>u.createElement("link",{key:b,nonce:n.nonce,...w})))}function hr(...e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var jt=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{jt&&(window.__reactRouterVersion="7.10.1")}catch{}function mr({basename:e,children:t,unstable_useTransitions:n,window:r}){let a=u.useRef();a.current==null&&(a.current=Qt({window:r,v5Compat:!0}));let s=a.current,[o,l]=u.useState({action:s.action,location:s.location}),d=u.useCallback(c=>{n===!1?l(c):u.startTransition(()=>l(c))},[n]);return u.useLayoutEffect(()=>s.listen(d),[s,d]),u.createElement(Wn,{basename:e,children:t,location:o.location,navigationType:o.action,navigator:s,unstable_useTransitions:n===!0})}var _t=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ae=u.forwardRef(function({onClick:t,discover:n="render",prefetch:r="none",relative:a,reloadDocument:s,replace:o,state:l,target:d,to:c,preventScrollReset:h,viewTransition:m,...f},p){let{basename:b,unstable_useTransitions:w}=u.useContext(I),y=typeof c=="string"&&_t.test(c),g,k=!1;if(typeof c=="string"&&y&&(g=c,jt))try{let P=new URL(window.location.href),G=c.startsWith("//")?new URL(P.protocol+c):new URL(c),X=U(G.pathname,b);G.origin===P.origin&&X!=null?c=X+G.search+G.hash:k=!0}catch{M(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let x=Nn(c,{relative:a}),[v,E,z]=lr(r,f),A=yr(c,{replace:o,state:l,target:d,preventScrollReset:h,relative:a,viewTransition:m,unstable_useTransitions:w});function Z(P){t&&t(P),P.defaultPrevented||A(P)}let q=u.createElement("a",{...f,...z,href:g||x,onClick:k||s?t:Z,ref:hr(p,E),target:d,"data-discover":!y&&n==="render"?"true":void 0});return v&&!y?u.createElement(u.Fragment,null,q,u.createElement(cr,{page:x})):q});Ae.displayName="Link";var fr=u.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:r="",end:a=!1,style:s,to:o,viewTransition:l,children:d,...c},h){let m=oe(o,{relative:c.relative}),f=K(),p=u.useContext(fe),{navigator:b,basename:w}=u.useContext(I),y=p!=null&&vr(m)&&l===!0,g=b.encodeLocation?b.encodeLocation(m).pathname:m.pathname,k=f.pathname,x=p&&p.navigation&&p.navigation.location?p.navigation.location.pathname:null;n||(k=k.toLowerCase(),x=x?x.toLowerCase():null,g=g.toLowerCase()),x&&w&&(x=U(x,w)||x);const v=g!=="/"&&g.endsWith("/")?g.length-1:g.length;let E=k===g||!a&&k.startsWith(g)&&k.charAt(v)==="/",z=x!=null&&(x===g||!a&&x.startsWith(g)&&x.charAt(g.length)==="/"),A={isActive:E,isPending:z,isTransitioning:y},Z=E?t:void 0,q;typeof r=="function"?q=r(A):q=[r,E?"active":null,z?"pending":null,y?"transitioning":null].filter(Boolean).join(" ");let P=typeof s=="function"?s(A):s;return u.createElement(Ae,{...c,"aria-current":Z,className:q,ref:h,style:P,to:o,viewTransition:l},typeof d=="function"?d(A):d)});fr.displayName="NavLink";var pr=u.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:r,replace:a,state:s,method:o=de,action:l,onSubmit:d,relative:c,preventScrollReset:h,viewTransition:m,...f},p)=>{let{unstable_useTransitions:b}=u.useContext(I),w=kr(),y=wr(l,{relative:c}),g=o.toLowerCase()==="get"?"get":"post",k=typeof l=="string"&&_t.test(l),x=v=>{if(d&&d(v),v.defaultPrevented)return;v.preventDefault();let E=v.nativeEvent.submitter,z=(E==null?void 0:E.getAttribute("formmethod"))||o,A=()=>w(E||v.currentTarget,{fetcherKey:t,method:z,navigate:n,replace:a,state:s,relative:c,preventScrollReset:h,viewTransition:m});b&&n!==!1?u.startTransition(()=>A()):A()};return u.createElement("form",{ref:p,method:g,action:y,onSubmit:r?d:x,...f,"data-discover":!k&&e==="render"?"true":void 0})});pr.displayName="Form";function gr(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Pt(e){let t=u.useContext(Q);return L(t,gr(e)),t}function yr(e,{target:t,replace:n,state:r,preventScrollReset:a,relative:s,viewTransition:o,unstable_useTransitions:l}={}){let d=Rn(),c=K(),h=oe(e,{relative:s});return u.useCallback(m=>{if(Gn(m,t)){m.preventDefault();let f=n!==void 0?n:re(c)===re(h),p=()=>d(e,{replace:f,state:r,preventScrollReset:a,relative:s,viewTransition:o});l?u.startTransition(()=>p()):p()}},[c,d,h,n,r,t,e,a,s,o,l])}var xr=0,br=()=>`__${String(++xr)}__`;function kr(){let{router:e}=Pt("useSubmit"),{basename:t}=u.useContext(I),n=Fn(),r=e.fetch,a=e.navigate;return u.useCallback(async(s,o={})=>{let{action:l,method:d,encType:c,formData:h,body:m}=Zn(s,t);if(o.navigate===!1){let f=o.fetcherKey||br();await r(f,n,o.action||l,{preventScrollReset:o.preventScrollReset,formData:h,body:m,formMethod:o.method||d,formEncType:o.encType||c,flushSync:o.flushSync})}else await a(o.action||l,{preventScrollReset:o.preventScrollReset,formData:h,body:m,formMethod:o.method||d,formEncType:o.encType||c,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})},[r,a,t,n])}function wr(e,{relative:t}={}){let{basename:n}=u.useContext(I),r=u.useContext(W);L(r,"useFormAction must be used inside a RouteContext");let[a]=r.matches.slice(-1),s={...oe(e||".",{relative:t})},o=K();if(e==null){s.search=o.search;let l=new URLSearchParams(s.search),d=l.getAll("index");if(d.some(h=>h==="")){l.delete("index"),d.filter(m=>m).forEach(m=>l.append("index",m));let h=l.toString();s.search=h?`?${h}`:""}}return(!e||e===".")&&a.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(s.pathname=s.pathname==="/"?n:B([n,s.pathname])),re(s)}function vr(e,{relative:t}={}){let n=u.useContext(vt);L(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=Pt("useViewTransitionState"),a=oe(e,{relative:t});if(!n.isTransitioning)return!1;let s=U(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=U(n.nextLocation.pathname,r)||n.nextLocation.pathname;return me(a.pathname,o)!=null||me(a.pathname,s)!=null}const Re=[{id:"default",name:"Lavender",dataTheme:null,previewColor:"#B49DFF"},{id:"amber",name:"Amber",dataTheme:"amber",previewColor:"#FFB347"},{id:"grey",name:"Steel",dataTheme:"grey",previewColor:"#8B9DC3"},{id:"black",name:"Neon",dataTheme:"black",previewColor:"#00D4FF"},{id:"flora",name:"Flora",dataTheme:"flora",previewColor:"#7DD3A8"}],Sr=[{id:"default",src:"/assets/bg.jpg",suggestedScheme:"default"},{id:"amber",src:"/assets/bg-amber.jpg",suggestedScheme:"amber"},{id:"grey",src:"/assets/bg-grey.jpg",suggestedScheme:"grey"},{id:"black",src:"/assets/bg-black.jpg",suggestedScheme:"black"},{id:"flora",src:"/assets/bg-flora.jpg",suggestedScheme:"flora"}],Tt=[{id:"default",name:"Default",colorScheme:"default",backgroundImage:"/assets/bg.jpg"},{id:"amber",name:"Amber",colorScheme:"amber",backgroundImage:"/assets/bg-amber.jpg"},{id:"grey",name:"Steel",colorScheme:"grey",backgroundImage:"/assets/bg-grey.jpg"},{id:"black",name:"Neon",colorScheme:"black",backgroundImage:"/assets/bg-black.jpg"},{id:"flora",name:"Flora",colorScheme:"flora",backgroundImage:"/assets/bg-flora.jpg"}],ne={colorScheme:"default",backgroundImage:"/assets/bg.jpg",brightness:80},D={colorScheme:"pymc-color-scheme",backgroundImage:"pymc-background-image",brightness:"pymc-bg-brightness",legacyBackground:"pymc-background"};function Cr(e){return Re.find(t=>t.id===e)??Re[0]}function Er(e){return typeof e=="string"&&Re.some(t=>t.id===e)}function Us(e){const t=new Image;t.src=e}const Mt=u.createContext(null);function Lr(){if(typeof window>"u")return ne;try{let e=localStorage.getItem(D.colorScheme),t=localStorage.getItem(D.backgroundImage);const n=localStorage.getItem(D.brightness);if(!e&&!t){const o=localStorage.getItem(D.legacyBackground);if(o){const l=Tt.find(d=>d.id===o);l&&(e=l.colorScheme,t=l.backgroundImage,localStorage.setItem(D.colorScheme,e),localStorage.setItem(D.backgroundImage,t),localStorage.removeItem(D.legacyBackground))}}const r=Er(e)?e:ne.colorScheme,a=t||ne.backgroundImage;let s=ne.brightness;if(n){const o=parseInt(n,10);!isNaN(o)&&o>=0&&o<=100&&(s=o)}return{colorScheme:r,backgroundImage:a,brightness:s}}catch{return ne}}function Nr(e){if(!(typeof window>"u"))try{localStorage.setItem(D.colorScheme,e.colorScheme),localStorage.setItem(D.backgroundImage,e.backgroundImage),localStorage.setItem(D.brightness,String(e.brightness))}catch{}}function Rr(e){const t=Cr(e);t.dataTheme?document.documentElement.setAttribute("data-theme",t.dataTheme):document.documentElement.removeAttribute("data-theme")}function jr({children:e}){const[t,n]=u.useState(()=>Lr());u.useEffect(()=>{Rr(t.colorScheme)},[t.colorScheme]),u.useEffect(()=>{Nr(t)},[t]),u.useEffect(()=>{Sr.forEach(d=>{const c=new Image;c.src=d.src})},[]);const r=u.useCallback(d=>{n(c=>({...c,colorScheme:d}))},[]),a=u.useCallback(d=>{n(c=>({...c,backgroundImage:d}))},[]),s=u.useCallback(d=>{const c=Math.max(0,Math.min(100,Math.round(d)));n(h=>({...h,brightness:c}))},[]),o=u.useCallback(d=>{const c=Tt.find(h=>h.id===d);c&&n(h=>({...h,colorScheme:c.colorScheme,backgroundImage:c.backgroundImage}))},[]),l=u.useMemo(()=>({theme:t,setColorScheme:r,setBackgroundImage:a,setBrightness:s,setThemePreset:o}),[t,r,a,s,o]);return i.jsx(Mt.Provider,{value:l,children:e})}function _r(){const e=u.useContext(Mt);if(!e)throw new Error("useTheme must be used within a ThemeProvider. Wrap your app with <ThemeProvider> in App.tsx.");return e}const Pr="modulepreload",Tr=function(e){return"/"+e},tt={},J=function(t,n,r){let a=Promise.resolve();if(n&&n.length>0){let o=function(c){return Promise.all(c.map(h=>Promise.resolve(h).then(m=>({status:"fulfilled",value:m}),m=>({status:"rejected",reason:m}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),d=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));a=o(n.map(c=>{if(c=Tr(c),c in tt)return;tt[c]=!0;const h=c.endsWith(".css"),m=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${m}`))return;const f=document.createElement("link");if(f.rel=h?"stylesheet":Pr,h||(f.as="script"),f.crossOrigin="",f.href=c,d&&f.setAttribute("nonce",d),document.head.appendChild(f),h)return new Promise((p,b)=>{f.addEventListener("load",p),f.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return a.then(o=>{for(const l of o||[])l.status==="rejected"&&s(l.reason);return t().catch(s)})};/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mr=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Ir=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,r)=>r?r.toUpperCase():n.toLowerCase()),nt=e=>{const t=Ir(e);return t.charAt(0).toUpperCase()+t.slice(1)},It=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim(),Ar=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Dr={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $r=u.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:a="",children:s,iconNode:o,...l},d)=>u.createElement("svg",{ref:d,...Dr,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:It("lucide",a),...!s&&!Ar(l)&&{"aria-hidden":"true"},...l},[...o.map(([c,h])=>u.createElement(c,h)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=(e,t)=>{const n=u.forwardRef(({className:r,...a},s)=>u.createElement($r,{ref:s,iconNode:t,className:It(`lucide-${Mr(nt(e))}`,`lucide-${e}`,r),...a}));return n.displayName=nt(e),n};/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Or=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],Fr=R("chart-column",Or);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hr=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Br=R("chevron-down",Hr);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ur=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Wr=R("clock",Ur);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zr=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],qr=R("file-text",zr);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vr=[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]],At=R("gauge",Vr);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kr=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],Jr=R("layout-dashboard",Kr);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gr=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}],["path",{d:"M14 4h7",key:"3xa0d5"}],["path",{d:"M14 9h7",key:"1icrd9"}],["path",{d:"M14 15h7",key:"1mj8o2"}],["path",{d:"M14 20h7",key:"11slyb"}]],Yr=R("layout-list",Gr);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qr=[["path",{d:"M19.914 11.105A7.298 7.298 0 0 0 20 10a8 8 0 0 0-16 0c0 4.993 5.539 10.193 7.399 11.799a1 1 0 0 0 1.202 0 32 32 0 0 0 .824-.738",key:"fcdtly"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M16 18h6",key:"987eiv"}],["path",{d:"M19 15v6",key:"10aioa"}]],Zr=R("map-pin-plus",Qr);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xr=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],ea=R("menu",Xr);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ta=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],na=R("pause",ta);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ra=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],aa=R("play",ra);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sa=[["path",{d:"M16.247 7.761a6 6 0 0 1 0 8.478",key:"1fwjs5"}],["path",{d:"M19.075 4.933a10 10 0 0 1 0 14.134",key:"ehdyv1"}],["path",{d:"M4.925 19.067a10 10 0 0 1 0-14.134",key:"1q22gi"}],["path",{d:"M7.753 16.239a6 6 0 0 1 0-8.478",key:"r2q7qm"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],oa=R("radio",sa);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ia=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],la=R("send",ia);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ca=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],ua=R("settings",ca);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const da=[["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M12 21v-9",key:"17s77i"}],["path",{d:"M12 8V3",key:"13r4qs"}],["path",{d:"M17 16h4",key:"h1uq16"}],["path",{d:"M19 12V3",key:"o1uvq1"}],["path",{d:"M19 21v-5",key:"qua636"}],["path",{d:"M3 14h4",key:"bcjad9"}],["path",{d:"M5 10V3",key:"cb8scm"}],["path",{d:"M5 21v-7",key:"1w1uti"}]],ha=R("sliders-vertical",da);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ma=[["path",{d:"m7 11 2-2-2-2",key:"1lz0vl"}],["path",{d:"M11 13h4",key:"1p7l4v"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}]],fa=R("square-terminal",ma);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pa=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],ga=R("x",pa),be="0.6.63",ke="/assets/WCM_Waves-CI2kWZFp.gif",rt=e=>{let t;const n=new Set,r=(c,h)=>{const m=typeof c=="function"?c(t):c;if(!Object.is(m,t)){const f=t;t=h??(typeof m!="object"||m===null)?m:Object.assign({},t,m),n.forEach(p=>p(t,f))}},a=()=>t,l={setState:r,getState:a,getInitialState:()=>d,subscribe:c=>(n.add(c),()=>n.delete(c))},d=t=e(r,a,l);return l},ya=(e=>e?rt(e):rt),xa=e=>e;function ba(e,t=xa){const n=ie.useSyncExternalStore(e.subscribe,ie.useCallback(()=>t(e.getState()),[e,t]),ie.useCallback(()=>t(e.getInitialState()),[e,t]));return ie.useDebugValue(n),n}const at=e=>{const t=ya(e),n=r=>ba(t,r);return Object.assign(n,t),n},De=(e=>e?at(e):at),$={spreadingFactor:7,bandwidthHz:125e3,codingRate:5,preambleLength:8,crcEnabled:!0,explicitHeader:!0};function ka(e,t={}){const n=t.spreadingFactor??$.spreadingFactor,r=t.bandwidthHz??$.bandwidthHz,a=t.codingRate??$.codingRate,s=t.preambleLength??$.preambleLength??8,o=t.crcEnabled??$.crcEnabled?1:0,l=t.explicitHeader??$.explicitHeader?0:1,d=n>=11&&r<=125e3?1:0,c=r/1e3,h=Math.pow(2,n)/c,m=(s+4.25)*h,f=Math.max(8*e-4*n+28+16*o-20*l,0),p=4*(n-2*d),w=(8+Math.ceil(f/p)*a)*h;return m+w}function wa(e){var n;const t=(n=e==null?void 0:e.config)==null?void 0:n.radio;return{spreadingFactor:(t==null?void 0:t.spreading_factor)??$.spreadingFactor,bandwidthHz:(t==null?void 0:t.bandwidth)??$.bandwidthHz,codingRate:(t==null?void 0:t.coding_rate)??$.codingRate,preambleLength:(t==null?void 0:t.preamble_length)??$.preambleLength,crcEnabled:!0,explicitHeader:!0}}const va="",V=new Map,st=50,Sa=300*1e3,ue=new Map,ot={"/api/stats":2e3,"/api/logs":1e3,"/api/recent_packets":2e3,"/api/hardware_stats":3e3,"/api/packet_type_graph_data":3e4,"/api/metrics_graph_data":3e4,"/api/noise_floor_history":3e4,"/api/radio_presets":6e4,default:5e3};function Ca(e){for(const[t,n]of Object.entries(ot))if(t!=="default"&&e.startsWith(t))return n;return ot.default}function Ea(e,t){return t!=null&&t.method&&t.method!=="GET"?"":e}function La(){const e=Date.now();for(const[t,n]of V.entries())e-n.timestamp>Sa&&V.delete(t);if(V.size>st){const t=Array.from(V.entries());t.sort((r,a)=>r[1].timestamp-a[1].timestamp);const n=t.slice(0,t.length-st);for(const[r]of n)V.delete(r)}}function Na(e,t,n){e&&(V.set(e,{data:t,timestamp:Date.now(),ttl:n}),La())}function Ra(e){if(!e)return null;const t=V.get(e);if(!t)return null;const r=Date.now()-t.timestamp>t.ttl;return{data:t.data,isStale:r}}typeof document<"u"&&document.addEventListener("visibilitychange",()=>{if(document.visibilityState==="visible")for(const e of V.values())e.timestamp=0});async function it(e,t){const n=`${va}${e}`,r={};if(t!=null&&t.headers){const s=t.headers;s instanceof Headers?s.forEach((o,l)=>{r[l]=o}):Array.isArray(s)?s.forEach(([o,l])=>{r[o]=l}):Object.assign(r,s)}t!=null&&t.body&&(r["Content-Type"]="application/json");const a=await fetch(n,{...t,headers:r});if(!a.ok)throw new Error(`API error: ${a.status} ${a.statusText}`);return a.json()}async function _(e,t){const n=Ea(e,t),r=Ca(e);if(!n)return it(e,t);const a=Ra(n);if(a&&!a.isStale)return a.data;const s=ue.get(n);if(s)return a?a.data:s;const o=it(e,t).then(l=>(Na(n,l,r),ue.delete(n),l)).catch(l=>{throw ue.delete(n),l});return ue.set(n,o),a?(o.catch(()=>{}),a.data):o}function ja(e){return e&&(e.toLowerCase()==="chat node"?"Companion":e)}function _a(e){if(e.neighbors)for(const t of Object.values(e.neighbors))t.contact_type=ja(t.contact_type);return e}async function je(){const e=await _("/api/stats");return _a(e)}async function lt(){return _("/api/logs")}async function Pa(e=100){return _(`/api/recent_packets?limit=${e}`)}async function Ta(e){const t=Math.max(e.limit||1e3,5e3),n=await Pa(t);if(!n.success||!n.data)return n;let r=n.data;return e.type!==void 0&&(r=r.filter(a=>(a.type??a.payload_type)===e.type)),e.route!==void 0&&(r=r.filter(a=>(a.route??a.route_type)===e.route)),e.start_timestamp&&(r=r.filter(a=>a.timestamp>=e.start_timestamp)),e.end_timestamp&&(r=r.filter(a=>a.timestamp<=e.end_timestamp)),e.limit&&r.length>e.limit&&(r=r.slice(0,e.limit)),{success:!0,data:r,count:r.length}}async function Ma(e=24){return _(`/api/packet_type_graph_data?hours=${e}`)}async function Ia(e=24){return _(`/api/noise_floor_history?hours=${e}`)}async function Aa(){return _("/api/hardware_stats")}async function Da(){return _("/api/send_advert",{method:"POST",body:"{}"})}async function $a(e){return _("/api/set_mode",{method:"POST",body:JSON.stringify({mode:e})})}async function Oa(e){return _("/api/set_duty_cycle",{method:"POST",body:JSON.stringify({enabled:e})})}async function Ws(e=24){return _(`/api/packet_stats?hours=${e}`)}async function zs(e=20,t=20){try{const n=Math.floor(Date.now()/1e3),r=n-e*60,a=e*60/t,s=Math.ceil(e/60*1e3),o=Math.max(5e3,Math.min(s,5e4)),[l,d]=await Promise.all([Ta({start_timestamp:r,end_timestamp:n,limit:o}),je()]);if(!l.success||!l.data)return{success:!1,error:l.error||"Failed to fetch packets"};const c=l.data,h=wa(d),m=()=>{const g=[];for(let k=0;k<t;k++)g.push({bucket:k,start:r+k*a,end:r+(k+1)*a,count:0,airtime_ms:0,avg_snr:0,avg_rssi:0});return g},f=m(),p=m(),b=m(),w=m(),y=f.map(()=>({snr:0,rssi:0,count:0}));for(const g of c){const k=Math.floor((g.timestamp-r)/a);if(k<0||k>=t)continue;const x=g.length||g.payload_length||32,v=ka(x,h),E=g.packet_origin;E==="tx_local"?(p[k].count++,p[k].airtime_ms+=v):E==="tx_forward"||g.transmitted?(b[k].count++,b[k].airtime_ms+=v):g.drop_reason&&(w[k].count++,w[k].airtime_ms+=v),E!=="tx_local"&&(f[k].count++,f[k].airtime_ms+=v,y[k].snr+=g.snr||0,y[k].rssi+=g.rssi||0,y[k].count++)}for(let g=0;g<t;g++)y[g].count>0&&(f[g].avg_snr=y[g].snr/y[g].count,f[g].avg_rssi=y[g].rssi/y[g].count);return{success:!0,data:{time_range_minutes:e,bucket_count:t,bucket_duration_seconds:a,start_time:r,end_time:n,received:f,transmitted:p,forwarded:b,dropped:w}}}catch(n){return{success:!1,error:String(n)}}}async function Fa(){return _("/api/radio_presets")}async function qs(e){return _("/api/update_radio_config",{method:"POST",body:JSON.stringify(e)})}async function Vs(e){return _("/api/set_log_level",{method:"POST",body:JSON.stringify({level:e})})}const we="pymc-packet-cache",ve="pymc-packet-cache-meta",ct=3600*1e3,Ha=1e3,Se=3e4,Ce=5e4,Ba=500;class Ua{constructor(){C(this,"packets",new Map);C(this,"sortedPackets",[]);C(this,"sortedDirty",!0);C(this,"meta",{oldestTimestamp:0,newestTimestamp:0,lastUpdated:0,packetCount:0,backgroundLoadComplete:!1,deepLoadComplete:!1});C(this,"isLoading",!1);C(this,"isBackgroundLoading",!1);C(this,"isDeepLoading",!1);C(this,"listeners",new Set);C(this,"statusMessage","");this.loadFromStorage()}subscribe(t){return this.listeners.add(t),t(this.getState()),()=>this.listeners.delete(t)}getState(){return{isLoading:this.isLoading,isBackgroundLoading:this.isBackgroundLoading,isDeepLoading:this.isDeepLoading,backgroundLoadComplete:this.meta.backgroundLoadComplete,packetCount:this.packets.size,statusMessage:this.statusMessage}}getPackets(){return this.sortedDirty&&(this.sortedPackets=Array.from(this.packets.values()).sort((t,n)=>(t.timestamp??0)-(n.timestamp??0)),this.sortedDirty=!1),this.sortedPackets}isStale(){return this.packets.size===0?!0:Date.now()-this.meta.lastUpdated>ct}async quickLoad(){if(this.isStale()&&this.packets.size>0&&this.clear(),this.packets.size>0)return this.meta.backgroundLoadComplete||this.backgroundLoad(),this.getPackets();this.isLoading=!0,this.statusMessage="Fetching recent packets...",this.notifyListeners();try{const t=await this.fetchRecentPackets(Ha);t.success&&t.data&&(this.statusMessage=`Processing ${t.data.length} packets...`,this.notifyListeners(),this.mergePackets(t.data),this.saveToStorage())}catch(t){console.error("[PacketCache] Quick load failed:",t),this.statusMessage="Load failed"}finally{this.isLoading=!1,this.statusMessage="",this.notifyListeners()}return this.backgroundLoad(),this.getPackets()}async backgroundLoad(){if(!(this.meta.backgroundLoadComplete||this.isBackgroundLoading)){this.isBackgroundLoading=!0,this.statusMessage="Loading database...",this.notifyListeners();try{const t=setInterval(()=>{this.isBackgroundLoading&&(this.statusMessage=`Loading ${Se.toLocaleString()} packets...`,this.notifyListeners())},500),n=await this.fetchRecentPackets(Se);clearInterval(t),n.success&&n.data&&(this.statusMessage=`Processing ${n.data.length.toLocaleString()} packets...`,this.notifyListeners(),this.mergePackets(n.data),this.meta.backgroundLoadComplete=!0,this.saveToStorage())}catch(t){console.error("[PacketCache] Background load failed:",t),this.statusMessage="Background load failed"}finally{this.isBackgroundLoading=!1,this.statusMessage="",this.notifyListeners()}}}async deepLoad(){if(!(this.meta.deepLoadComplete||this.isDeepLoading))return this.doDeepLoad()}async forceDeepLoad(){if(!this.isDeepLoading)return this.meta.deepLoadComplete=!1,this.doDeepLoad()}async doDeepLoad(){this.isDeepLoading=!0,this.statusMessage="Fetching topology data...",this.notifyListeners();try{const t=setInterval(()=>{this.isDeepLoading&&(this.statusMessage=`Loading ${Ce.toLocaleString()} packets...`,this.notifyListeners())},500),n=await this.fetchRecentPackets(Ce);clearInterval(t),n.success&&n.data&&(this.statusMessage=`Processing ${n.data.length.toLocaleString()} packets...`,this.notifyListeners(),this.mergePackets(n.data),this.meta.deepLoadComplete=!0,this.saveToStorage())}catch(t){console.error("[PacketCache] Deep load failed:",t),this.statusMessage="Deep load failed"}finally{this.isDeepLoading=!1,this.statusMessage="",this.notifyListeners()}}async poll(){try{const t=await this.fetchRecentPackets(Ba);if(t.success&&t.data){const n=this.packets.size;this.mergePackets(t.data),this.packets.size>n&&(this.saveToStorage(),this.notifyListeners())}}catch(t){console.error("[PacketCache] Poll failed:",t)}return this.getPackets()}clear(){this.packets.clear(),this.sortedPackets=[],this.sortedDirty=!0,this.meta={oldestTimestamp:0,newestTimestamp:0,lastUpdated:0,packetCount:0,backgroundLoadComplete:!1,deepLoadComplete:!1},this.clearStorage(),this.notifyListeners()}mergePackets(t){let n=!1;for(const r of t){const a=r.packet_hash;if(a&&!this.packets.has(a)){this.packets.set(a,r),n=!0;const s=r.timestamp??0;(this.meta.oldestTimestamp===0||s<this.meta.oldestTimestamp)&&(this.meta.oldestTimestamp=s),s>this.meta.newestTimestamp&&(this.meta.newestTimestamp=s)}}n&&(this.sortedDirty=!0),this.meta.lastUpdated=Date.now(),this.meta.packetCount=this.packets.size}notifyListeners(){const t=this.getState();for(const n of this.listeners)n(t)}loadFromStorage(){if(!(typeof window>"u"))try{const t=localStorage.getItem(ve);t&&(this.meta=JSON.parse(t));const n=localStorage.getItem(we);if(n){const s=JSON.parse(n);for(const o of s)o.packet_hash&&this.packets.set(o.packet_hash,o)}if(this.meta.lastUpdated>0&&Date.now()-this.meta.lastUpdated>ct){console.log("[PacketCache] Cache stale, clearing"),this.clear();return}const r=Se*.5;this.meta.backgroundLoadComplete&&this.packets.size<r&&(console.log(`[PacketCache] Background load incomplete (${this.packets.size} < ${r}), will re-run`),this.meta.backgroundLoadComplete=!1);const a=Ce*.5;this.meta.deepLoadComplete&&this.packets.size<a&&(console.log(`[PacketCache] Deep load incomplete (${this.packets.size} < ${a}), will re-run`),this.meta.deepLoadComplete=!1),console.log(`[PacketCache] Loaded ${this.packets.size} packets from storage (bg:${this.meta.backgroundLoadComplete}, deep:${this.meta.deepLoadComplete})`)}catch(t){console.error("[PacketCache] Failed to load from storage:",t),this.clear()}}saveToStorage(){if(!(typeof window>"u"))try{localStorage.setItem(ve,JSON.stringify(this.meta)),localStorage.setItem(we,JSON.stringify(Array.from(this.packets.values())))}catch(t){console.warn("[PacketCache] Failed to save to storage:",t)}}clearStorage(){if(!(typeof window>"u"))try{localStorage.removeItem(we),localStorage.removeItem(ve)}catch(t){console.warn("[PacketCache] Failed to clear storage:",t)}}async fetchRecentPackets(t=1e3){const r=`/api/recent_packets?limit=${t}`,a=await fetch(r);if(!a.ok)throw new Error(`API error: ${a.status}`);return a.json()}}const F=new Ua;function Wa(e){return{paths:e.paths,byEndpoints:new Map(e.byEndpointsEntries),canonicalPaths:new Map(e.canonicalPathsEntries),totalObservations:e.totalObservations,uniquePathCount:e.uniquePathCount}}function $e(){return{paths:[],byEndpoints:new Map,canonicalPaths:new Map,totalObservations:0,uniquePathCount:0}}function za(e){return{edges:e.edges??[],validatedEdges:e.validatedEdges??[],weakEdges:e.weakEdges??[],certainEdges:e.certainEdges??[],uncertainEdges:e.uncertainEdges??[],maxPacketCount:e.maxPacketCount??0,maxCertainCount:e.maxCertainCount??0,localPrefix:e.localPrefix??null,hubNodes:e.hubNodes??[],edgeMap:new Map(e.edgeMapEntries??[]),neighborAffinity:new Map(e.neighborAffinityEntries??[]),fullAffinity:new Map(e.fullAffinityEntries??[]),centrality:new Map(e.centralityEntries??[]),loops:e.loops??[],loopEdgeKeys:new Set(e.loopEdgeKeyEntries??[]),txDelayRecommendations:new Map(e.txDelayRecommendationEntries??[]),pathRegistry:e.pathRegistry?Wa(e.pathRegistry):$e(),edgeBetweenness:new Map(e.edgeBetweennessEntries??[]),backboneEdges:e.backboneEdges??[],nodeMobility:new Map(e.nodeMobilityEntries??[]),mobileNodes:e.mobileNodes??[],pathHealth:e.pathHealth??[],lastHopNeighbors:e.lastHopNeighbors??[],disambiguationStats:e.disambiguationStats??Dt()}}function Dt(){return{totalPrefixes:0,unambiguousPrefixes:0,collisionPrefixes:0,collisionRate:0,avgConfidence:0,lowConfidencePrefixes:[],highCollisionPrefixes:[],totalResolutions:0}}function qa(){return{edges:[],validatedEdges:[],weakEdges:[],certainEdges:[],uncertainEdges:[],edgeMap:new Map,maxPacketCount:0,maxCertainCount:0,neighborAffinity:new Map,fullAffinity:new Map,localPrefix:null,centrality:new Map,hubNodes:[],loops:[],loopEdgeKeys:new Set,txDelayRecommendations:new Map,pathRegistry:$e(),edgeBetweenness:new Map,backboneEdges:[],nodeMobility:new Map,mobileNodes:[],pathHealth:[],lastHopNeighbors:[],disambiguationStats:Dt()}}class Va{constructor(){C(this,"worker",null);C(this,"listeners",new Set);C(this,"currentTopology",qa());C(this,"isComputing",!1);C(this,"pendingRequest",null);C(this,"debounceTimer",null);C(this,"debounceMs",100);this.initWorker()}initWorker(){if(!(typeof window>"u"))try{this.worker=new Worker(new URL("/assets/topology.worker-BKppHtjy.js",import.meta.url),{type:"module"}),this.worker.onmessage=t=>{this.handleWorkerMessage(t.data)},this.worker.onerror=t=>{console.error("[TopologyService] Worker error:",t)}}catch(t){console.error("[TopologyService] Failed to initialize worker:",t)}}handleWorkerMessage(t){if(this.isComputing=!1,t.type==="error"){console.error("[TopologyService] Worker computation error:",t.error);return}this.currentTopology=za(t.payload);for(const n of this.listeners)try{n(this.currentTopology,t.computeTimeMs)}catch(r){console.error("[TopologyService] Listener error:",r)}if(this.pendingRequest){const n=this.pendingRequest;this.pendingRequest=null,this.computeInternal(n)}}computeInternal(t){if(!this.worker){console.warn("[TopologyService] Worker not available");return}this.isComputing=!0;const n={type:"compute",payload:t};this.worker.postMessage(n)}compute(t,n,r,a,s,o){const l={packets:t,neighbors:n,localHash:r,localLat:a,localLon:s,airtimeMs:o};this.debounceTimer&&clearTimeout(this.debounceTimer),this.debounceTimer=setTimeout(()=>{this.debounceTimer=null,this.isComputing?this.pendingRequest=l:this.computeInternal(l)},this.debounceMs)}subscribe(t){return this.listeners.add(t),this.currentTopology.edges.length>0&&t(this.currentTopology,0),()=>{this.listeners.delete(t)}}getTopology(){return this.currentTopology}isWorking(){return this.isComputing}terminate(){this.debounceTimer&&clearTimeout(this.debounceTimer),this.worker&&(this.worker.terminate(),this.worker=null),this.listeners.clear()}}const $t=new Va;class Ka{constructor(){C(this,"worker",null);C(this,"listeners",new Set);C(this,"sparklines",new Map);C(this,"isComputing",!1);C(this,"lastComputeTimeMs",0);C(this,"pendingRequest",null);C(this,"debounceTimer",null);C(this,"debounceMs",150);this.initWorker()}initWorker(){if(!(typeof window>"u"))try{this.worker=new Worker(new URL("/assets/sparkline.worker-DejLHumI.js",import.meta.url),{type:"module"}),this.worker.onmessage=t=>{this.handleWorkerMessage(t.data)},this.worker.onerror=t=>{console.error("[SparklineService] Worker error:",t),this.isComputing=!1,this.notifyListeners()}}catch(t){console.error("[SparklineService] Failed to initialize worker:",t)}}handleWorkerMessage(t){if(this.isComputing=!1,t.type==="error"){console.error("[SparklineService] Worker computation error:",t.error),this.notifyListeners();return}if(this.sparklines=new Map(t.payload.sparklineEntries),this.lastComputeTimeMs=t.computeTimeMs,console.log(`[SparklineService] Computed ${t.nodeCount} sparklines from ${t.packetCount} packets in ${t.computeTimeMs.toFixed(0)}ms`),this.notifyListeners(),this.pendingRequest){const n=this.pendingRequest;this.pendingRequest=null,this.computeInternal(n.packets,n.nodeHashes)}}computeInternal(t,n){if(!this.worker){console.warn("[SparklineService] Worker not available");return}if(n.length===0){this.isComputing=!1,this.notifyListeners();return}this.isComputing=!0,this.notifyListeners();const r={type:"compute",payload:{packets:t,nodeHashes:n}};this.worker.postMessage(r)}notifyListeners(){for(const t of this.listeners)try{t(this.sparklines,this.isComputing)}catch(n){console.error("[SparklineService] Listener error:",n)}}compute(t,n){this.debounceTimer&&clearTimeout(this.debounceTimer),this.debounceTimer=setTimeout(()=>{this.debounceTimer=null,this.isComputing?this.pendingRequest={packets:t,nodeHashes:n}:this.computeInternal(t,n)},this.debounceMs)}getSparkline(t){return this.sparklines.get(t)??[]}getAllSparklines(){return this.sparklines}hasSparkline(t){return this.sparklines.has(t)}isWorking(){return this.isComputing}getLastComputeTime(){return this.lastComputeTimeMs}subscribe(t){return this.listeners.add(t),t(this.sparklines,this.isComputing),()=>{this.listeners.delete(t)}}clear(){this.sparklines.clear(),this.notifyListeners()}terminate(){this.debounceTimer&&clearTimeout(this.debounceTimer),this.worker&&(this.worker.terminate(),this.worker=null),this.listeners.clear()}}const Ot=new Ka;function Oe(e){return e.startsWith("0x")||e.startsWith("0X")?e.slice(2,4).toUpperCase():e.slice(0,2).toUpperCase()}function Ks(e,t){const n=e.toUpperCase();return t.startsWith("0x")||t.startsWith("0X")?t.slice(2).toUpperCase().startsWith(n):t.toUpperCase().startsWith(n)}const Js=[{label:"20m",minutes:20,buckets:40},{label:"1h",minutes:60,buckets:60},{label:"3h",minutes:180,buckets:90},{label:"12h",minutes:720,buckets:72},{label:"24h",minutes:1440,buckets:96},{label:"3d",minutes:4320,buckets:72},{label:"7d",minutes:10080,buckets:84}],Gs=[{label:"1h",hours:1},{label:"3h",hours:3},{label:"12h",hours:12},{label:"24h",hours:24},{label:"3d",hours:72},{label:"7d",hours:168}],Ys={received:"#39D98A"},ut={stats:3e3,packets:3e3,charts:3e4,logs:2e3,system:3e3},Ja={DEBUG:"text-[var(--log-debug)] border-[var(--log-debug)]/30",INFO:"text-[var(--log-info)] border-[var(--log-info)]/30",WARNING:"text-[var(--log-warning)] border-[var(--log-warning)]/30",ERROR:"text-[var(--log-error)] border-[var(--log-error)]/30",CRITICAL:"text-[var(--log-critical)] border-[var(--log-critical)]/50 bg-[var(--log-critical)]/10"};function Qs(e){return Ja[e]||"text-text-muted border-border-subtle"}const Ft="pymc-resource-history",Ht="pymc-resource-last-fetch",Bt="pymc-hidden-contacts",Ut="pymc-quick-neighbors",dt={ACTIVE_THRESHOLD_MS:10080*60*1e3,STALE_THRESHOLD_MS:336*60*60*1e3},Ga={ADVERT:4};function Ya(e,t){const n=t-e*1e3;return n<=dt.ACTIVE_THRESHOLD_MS?"active":n<=dt.STALE_THRESHOLD_MS?"stale":"expired"}function Qa(e){var n,r;const t=new Map;for(const a of Object.keys(e)){const s=Oe(a),o=t.get(s);if(!o)t.set(s,a);else{const l=(n=e[o])==null?void 0:n.zero_hop;((r=e[a])==null?void 0:r.zero_hop)&&!l&&t.set(s,a)}}return t}function Za(e){if(Array.isArray(e))return e;if(typeof e=="string"&&e.startsWith("["))try{const t=JSON.parse(e);return Array.isArray(t)?t:[]}catch{return[]}return[]}function Xa(e){return(e.type??e.payload_type)!==Ga.ADVERT||e.transmitted===!0?!1:Za(e.original_path).length===0}function es(e,t,n,r,a){if(!e)return null;let s=e;if(e.length<=4){const o=e.replace(/^0x/i,"").toUpperCase();if(o===t)return null;const l=n.get(o);if(!l)return null;s=l}return!r.has(s)||s===a?null:s}function ts(e,t){e.count++,t.rssi!==void 0&&t.rssi!==null&&(e.rssiSum+=t.rssi,e.rssiCount++),t.snr!==void 0&&t.snr!==null&&(e.snrSum+=t.snr,e.snrCount++);const n=t.timestamp??0;n>e.lastSeen&&(e.lastSeen=n)}function ns(e){return{hash:e,count:0,rssiSum:0,rssiCount:0,snrSum:0,snrCount:0,lastSeen:0}}function rs(e,t){const n=Ya(e.lastSeen,t);return n==="expired"?null:{hash:e.hash,prefix:Oe(e.hash),count:e.count,avgRssi:e.rssiCount>0?e.rssiSum/e.rssiCount:null,avgSnr:e.snrCount>0?e.snrSum/e.snrCount:null,lastSeen:e.lastSeen,status:n}}function as(e,t,n){if(!n||e.length===0||Object.keys(t).length===0)return[];const r=Date.now(),a=Oe(n),s=new Set(Object.keys(t)),o=Qa(t),l=new Map;for(const c of e){if(!Xa(c))continue;const h=es(c.src_hash,a,o,s,n);if(!h)continue;let m=l.get(h);m||(m=ns(h),l.set(h,m)),ts(m,c)}for(const[c,h]of Object.entries(t))h.zero_hop&&!l.has(c)&&l.set(c,{hash:c,count:h.advert_count??0,rssiSum:h.rssi??0,rssiCount:h.rssi!==void 0?1:0,snrSum:h.snr??0,snrCount:h.snr!==void 0?1:0,lastSeen:h.last_seen??0});const d=[];for(const c of l.values()){const h=rs(c,r);h&&d.push(h)}return d.sort((c,h)=>h.count!==c.count?h.count-c.count:h.lastSeen-c.lastSeen),d}function ss(){if(typeof window>"u")return[];try{const e=localStorage.getItem(Ut);if(e)return JSON.parse(e)}catch{}return[]}function os(e){if(!(typeof window>"u"))try{localStorage.setItem(Ut,JSON.stringify(e))}catch{}}function is(){if(typeof window>"u")return[];try{const e=localStorage.getItem(Ft);if(e)return JSON.parse(e)}catch{}return[]}function ls(){if(typeof window>"u")return new Set;try{const e=localStorage.getItem(Bt);if(e)return new Set(JSON.parse(e))}catch{}return new Set}function cs(e){if(!(typeof window>"u"))try{localStorage.setItem(Bt,JSON.stringify([...e]))}catch{}}function us(){if(typeof window>"u")return 0;try{const e=localStorage.getItem(Ht);if(e)return parseInt(e,10)||0}catch{}return 0}function ds(e,t){if(!(typeof window>"u"))try{localStorage.setItem(Ft,JSON.stringify(e)),localStorage.setItem(Ht,t.toString())}catch{}}const N=De((e,t)=>({stats:null,statsLoading:!1,statsError:null,packets:[],packetsLoading:!1,packetsError:null,lastPacketTimestamp:0,logs:[],logsLoading:!1,liveMode:!0,flashReceived:0,flashAdvert:0,resourceHistory:is(),lastResourceFetch:us(),hiddenContacts:ls(),quickNeighbors:ss(),initialized:!1,packetCacheState:F.getState(),initializeApp:async()=>{const{initialized:n}=t();if(n)return;e({initialized:!0,statsLoading:!0,packetsLoading:!0});let r=!1,a=!1;F.subscribe(s=>{if(e({packetCacheState:s}),r&&!s.isBackgroundLoading){const o=F.getPackets();o.length>0&&(e({packets:o}),t().triggerTopologyCompute(),t().updateQuickNeighbors(),t().triggerSparklineCompute())}if(r=s.isBackgroundLoading,a&&!s.isDeepLoading){const o=F.getPackets();o.length>0&&(e({packets:o}),t().triggerTopologyCompute(),t().updateQuickNeighbors(),t().triggerSparklineCompute())}a=s.isDeepLoading});try{const[s,o]=await Promise.all([je(),F.quickLoad()]);if(e({stats:s,statsLoading:!1}),o.length>0){const l=Math.max(...o.map(d=>d.timestamp??0));e({packets:o,packetsLoading:!1,lastPacketTimestamp:l}),t().triggerTopologyCompute(),t().updateQuickNeighbors(),t().triggerSparklineCompute()}else e({packetsLoading:!1})}catch(s){e({statsError:s instanceof Error?s.message:"Failed to initialize",statsLoading:!1,packetsLoading:!1})}setInterval(()=>{t().fetchStats()},ut.stats),setInterval(()=>{t().liveMode&&t().fetchPackets()},ut.packets),setTimeout(()=>{t().sendAdvert().catch(()=>{})},3e3)},prefetchForRoute:n=>{switch(n){case"/logs":lt().catch(()=>{});break;case"/system":Aa().catch(()=>{});break;case"/statistics":Ma(3).catch(()=>{}),Ia(3).catch(()=>{});break;case"/settings":Fa().catch(()=>{});break}},fetchStats:async()=>{const{stats:n}=t();n||e({statsLoading:!0}),e({statsError:null});try{const r=await je();e({stats:r,statsLoading:!1})}catch(r){e({statsError:r instanceof Error?r.message:"Failed to fetch stats",statsLoading:!1})}},fetchPackets:async n=>{const{packets:r}=t();r.length===0&&e({packetsLoading:!0}),e({packetsError:null});try{const a=await F.poll(),{lastPacketTimestamp:s}=t(),o=a.length>0?Math.max(...a.map(l=>l.timestamp??0)):0;o>s&&s>0&&e({flashReceived:t().flashReceived+1}),e({packets:a,packetsLoading:!1,lastPacketTimestamp:o||s}),t().triggerTopologyCompute(),t().updateQuickNeighbors()}catch(a){e({packetsError:a instanceof Error?a.message:"Failed to fetch packets",packetsLoading:!1})}},fetchLogs:async()=>{const{logs:n}=t();n.length===0&&e({logsLoading:!0});try{const r=await lt();e({logs:r.logs,logsLoading:!1})}catch{e({logsLoading:!1})}},setLiveMode:n=>{e({liveMode:n})},setMode:async n=>{try{(await $a(n)).success&&await t().fetchStats()}catch(r){console.error("Failed to set mode:",r)}},setDutyCycle:async n=>{try{(await Oa(n)).success&&t().fetchStats()}catch(r){console.error("Failed to set duty cycle:",r)}},sendAdvert:async()=>{try{const n=await Da();return n.success&&e({flashAdvert:t().flashAdvert+1}),n.success}catch(n){return console.error("Failed to send advert:",n),!1}},triggerFlashReceived:()=>{e({flashReceived:t().flashReceived+1})},triggerFlashAdvert:()=>{e({flashAdvert:t().flashAdvert+1})},addResourceDataPoint:(n,r,a)=>{const s=Date.now(),{lastResourceFetch:o,resourceHistory:l}=t();if(s-o<1e3)return;const d=new Date(s).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}),c={timestamp:s,time:d,cpu:n,memory:r},h=[...l,c],m=h.length>a?h.slice(-a):h;e({resourceHistory:m,lastResourceFetch:s}),ds(m,s)},hideContact:n=>{const{hiddenContacts:r}=t(),a=new Set(r);a.add(n),e({hiddenContacts:a}),cs(a)},clearPacketCache:()=>{F.clear(),e({packets:[],lastPacketTimestamp:0}),F.quickLoad().then(n=>{if(n.length>0){const r=Math.max(...n.map(a=>a.timestamp??0));e({packets:n,lastPacketTimestamp:r}),t().triggerTopologyCompute()}})},triggerTopologyCompute:()=>{var h,m,f,p;const{packets:n,stats:r,hiddenContacts:a}=t();if(n.length===0||!r)return;const s=r.neighbors??{},o=Object.fromEntries(Object.entries(s).filter(([b])=>!a.has(b))),l=r.local_hash,d=(m=(h=r.config)==null?void 0:h.repeater)==null?void 0:m.latitude,c=(p=(f=r.config)==null?void 0:f.repeater)==null?void 0:p.longitude;$t.compute(n,o,l,d,c)},triggerDeepAnalysis:async()=>{await F.forceDeepLoad()},updateQuickNeighbors:()=>{const{packets:n,stats:r,hiddenContacts:a}=t();if(n.length===0||!r)return;const s=r.neighbors??{},o=Object.fromEntries(Object.entries(s).filter(([h])=>!a.has(h))),l=r.local_hash,d=as(n,o,l),c=t().quickNeighbors;(d.length!==c.length||d.some((h,m)=>{var f,p;return h.hash!==((f=c[m])==null?void 0:f.hash)||h.count!==((p=c[m])==null?void 0:p.count)}))&&(e({quickNeighbors:d}),os(d))},triggerSparklineCompute:()=>{const{packets:n,stats:r,hiddenContacts:a}=t();if(n.length===0||!r)return;const s=r.neighbors??{},o=Object.keys(s).filter(l=>!a.has(l));o.length!==0&&Ot.compute(n,o)}})),hs=N,Zs=()=>N(e=>e.stats),Xs=()=>N(e=>e.statsError),eo=()=>N(e=>e.packets),to=()=>N(e=>e.packetsLoading),no=()=>N(e=>e.logs),ro=()=>N(e=>e.logsLoading),ao=()=>N(e=>e.liveMode),so=()=>N(e=>e.flashReceived),oo=()=>N(e=>e.flashAdvert),ms=()=>N(e=>e.initializeApp),fs=()=>N(e=>e.prefetchForRoute),io=()=>N(e=>e.fetchLogs),lo=()=>N(e=>e.setLiveMode),co=()=>N(e=>e.resourceHistory),uo=()=>N(e=>e.addResourceDataPoint),ho=()=>N(e=>e.hiddenContacts),mo=()=>N(e=>e.hideContact),ps=()=>N(e=>e.packetCacheState),fo=()=>N(e=>e.triggerDeepAnalysis),po=()=>N(e=>e.quickNeighbors),Fe=De(e=>({sparklines:new Map,isComputing:!1,lastUpdated:0,nodeCount:0,setSparklines:t=>e({sparklines:t,lastUpdated:Date.now(),nodeCount:t.size,isComputing:!1}),setComputing:t=>e({isComputing:t})}));typeof window<"u"&&setTimeout(()=>{Ot.subscribe((e,t)=>{const n=Fe.getState();t&&!n.isComputing?n.setComputing(!0):!t&&e.size>0?n.setSparklines(e):!t&&n.isComputing&&n.setComputing(!1)})},0);const gs=()=>Fe(e=>e.isComputing),ys=[],ht=new Map;function go(e){return Fe(t=>{const n=t.sparklines.get(e);if(!n||n.length===0)return ys;const r=ht.get(e);return r===n?r:(ht.set(e,n),n)})}function xs(){return{edges:[],validatedEdges:[],weakEdges:[],certainEdges:[],uncertainEdges:[],edgeMap:new Map,maxPacketCount:0,maxCertainCount:0,neighborAffinity:new Map,fullAffinity:new Map,localPrefix:null,centrality:new Map,hubNodes:[],loops:[],loopEdgeKeys:new Set,txDelayRecommendations:new Map,pathRegistry:$e(),edgeBetweenness:new Map,backboneEdges:[],nodeMobility:new Map,mobileNodes:[],pathHealth:[],lastHopNeighbors:[],disambiguationStats:{totalPrefixes:0,unambiguousPrefixes:0,collisionPrefixes:0,collisionRate:0,avgConfidence:0,lowConfidencePrefixes:[],highCollisionPrefixes:[],totalResolutions:0}}}const O=De(e=>({topology:xs(),isComputing:!1,lastComputeTimeMs:0,lastUpdated:0,setTopology:(t,n)=>e({topology:t,lastComputeTimeMs:n,lastUpdated:Date.now(),isComputing:!1}),setComputing:t=>e({isComputing:t})}));typeof window<"u"&&$t.subscribe((e,t)=>{O.getState().setTopology(e,t)});const yo=()=>O(e=>e.topology),xo=()=>O(e=>e.topology.hubNodes),bo=()=>O(e=>e.topology.centrality),ko=()=>O(e=>e.topology.fullAffinity),bs=()=>O(e=>e.isComputing);let mt=null,ft=null;const wo=()=>O(e=>(e.topology.hubNodes!==ft&&(ft=e.topology.hubNodes,mt=new Set(e.topology.hubNodes)),mt)),vo=()=>O(e=>e.topology.pathHealth),So=()=>O(e=>e.topology.disambiguationStats),Co=()=>O(e=>e.topology.disambiguationStats.totalPrefixes>0);function ks(e){if(e<60)return`${Math.floor(e)}s`;const t=Math.floor(e/86400),n=Math.floor(e%86400/3600),r=Math.floor(e%3600/60),a=[];return t>0&&a.push(`${t}d`),n>0&&a.push(`${n}h`),(r>0||a.length===0)&&a.push(`${r}m`),a.join(" ")}function Eo(e){const n=Date.now()/1e3-e;return n<60?"just now":n<3600?`${Math.floor(n/60)}m ago`:n<86400?`${Math.floor(n/3600)}h ago`:`${Math.floor(n/86400)}d ago`}function Lo(e){const n=Date.now()/1e3-e;return n<60?`${Math.floor(n)}s`:n<3600?`${Math.floor(n/60)}m`:n<86400?`${Math.floor(n/3600)}h`:`${Math.floor(n/86400)}d`}function No(e){return new Date(e*1e3).toLocaleString()}function Ro(e){const t=new Date(e*1e3),n=t.toLocaleString("en-US",{month:"short"}),r=t.getDate(),a=t.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1});return`${n} ${r}, ${a}`}function jo(e){return`${(e/1e6).toFixed(3)} MHz`}function _o(e){return`${(e/1e3).toFixed(1)} kHz`}const ws=[{name:"Dashboard",to:"/",icon:Jr},{name:"Contacts",to:"/contacts",icon:Zr},{name:"Packets",to:"/packets",icon:Yr},{name:"Statistics",to:"/statistics",icon:Fr},{name:"System",to:"/system",icon:At},{name:"Logs",to:"/logs",icon:qr},{name:"Terminal",to:"/terminal",icon:fa},{name:"Settings",to:"/settings",icon:ua}],pt="pymc-controls-expanded";function vs(){var Be,Ue,We,ze;const{pathname:e}=K(),{stats:t,setMode:n,setDutyCycle:r,sendAdvert:a}=hs(),s=fs(),o=ps(),l=gs(),d=bs(),[c,h]=u.useState(!1),[m,f]=u.useState(!0),[p,b]=u.useState(!1),w=u.useRef(null),y=u.useCallback(j=>{j!==e&&(w.current&&clearTimeout(w.current),w.current=setTimeout(()=>{s(j)},100))},[e,s]),g=u.useCallback(()=>{w.current&&(clearTimeout(w.current),w.current=null)},[]);u.useEffect(()=>{const j=localStorage.getItem(pt);j!==null&&queueMicrotask(()=>f(j==="true"))},[]);const k=()=>{const j=!m;f(j),localStorage.setItem(pt,String(j))};u.useEffect(()=>{queueMicrotask(()=>h(!1))},[e]),u.useEffect(()=>(document.body.style.overflow=c?"hidden":"",()=>{document.body.style.overflow=""}),[c]);const x=t==null?void 0:t.noise_floor_dbm,v=((Ue=(Be=t==null?void 0:t.config)==null?void 0:Be.repeater)==null?void 0:Ue.mode)??"forward",E=((ze=(We=t==null?void 0:t.config)==null?void 0:We.duty_cycle)==null?void 0:ze.enforcement_enabled)??!1,z=async()=>{b(!0),await a(),setTimeout(()=>b(!1),1e3)},A=()=>{n(v==="forward"?"monitor":"forward")},Z=()=>{r(!E)},q=o.isBackgroundLoading||o.isDeepLoading||l||d,P=()=>q?i.jsxs("div",{className:"px-3 pb-2",children:[i.jsxs("div",{className:"flex items-center gap-2 px-2 py-1.5",children:[i.jsxs("div",{className:"relative flex h-2 w-2",children:[i.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-accent-primary opacity-75"}),i.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-accent-primary"})]}),i.jsx("span",{className:"type-data-xs text-text-muted",children:"Analyzing database"})]}),i.jsx("div",{className:"mx-2 h-0.5 bg-white/5 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-full bg-accent-primary/60 rounded-full animate-pulse",style:{width:"100%",animation:"shimmer 1.5s ease-in-out infinite"}})})]}):null,G=()=>i.jsx("nav",{className:"flex-1 px-3 py-4 space-y-1 overflow-y-auto",children:ws.map(j=>{const qe=e===j.to;return i.jsxs(Ae,{to:j.to,onClick:()=>h(!1),onMouseEnter:()=>y(j.to),onMouseLeave:g,className:T("flex items-center gap-3 px-3 py-2.5 rounded-xl transition-all duration-150 min-h-[44px]",qe?"bg-accent-primary/15 text-accent-primary":"text-text-muted hover:text-text-primary hover:bg-white/5"),children:[i.jsx(j.icon,{className:T("w-5 h-5 flex-shrink-0",qe&&"text-accent-primary")}),i.jsx("span",{className:"type-body-sm font-medium",children:j.name})]},j.name)})}),X=()=>i.jsxs("div",{className:"px-3 py-3",children:[i.jsxs("button",{onClick:k,className:"w-full flex items-center justify-between px-2 py-1.5 mb-2 rounded-lg hover:bg-white/5 transition-colors",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(ha,{className:"w-4 h-4 text-accent-primary"}),i.jsx("span",{className:"type-data-xs text-text-muted uppercase tracking-wide",children:"Controls"})]}),i.jsx(Br,{className:T("w-4 h-4 text-text-muted transition-transform duration-200",m?"rotate-0":"-rotate-90")})]}),i.jsx("div",{className:T("overflow-hidden transition-all duration-300 ease-out",m?"max-h-96 opacity-100":"max-h-0 opacity-0"),children:i.jsxs("div",{className:"control-panel-skeuo",children:[i.jsxs("button",{onClick:z,disabled:p,className:T("control-btn control-btn-primary w-full",p&&"opacity-70"),children:[i.jsx(la,{className:T("w-4 h-4",p&&"animate-pulse")}),i.jsx("span",{children:p?"Sending...":"Send Advert"})]}),i.jsxs("div",{className:"control-toggle-group",children:[i.jsxs("div",{className:"control-toggle-label",children:[i.jsx("span",{children:"Mode"}),i.jsx("span",{className:T("control-toggle-status",v==="forward"?"text-accent-success":"text-accent-secondary"),children:v==="forward"?"FWD":"MON"})]}),i.jsx("button",{onClick:A,className:T("control-btn w-full",v==="forward"?"control-btn-success":"control-btn-warning"),children:v==="forward"?i.jsxs(i.Fragment,{children:[i.jsx(aa,{className:"w-4 h-4"}),i.jsx("span",{children:"Forward"})]}):i.jsxs(i.Fragment,{children:[i.jsx(na,{className:"w-4 h-4"}),i.jsx("span",{children:"Monitor"})]})})]}),i.jsxs("div",{className:"control-toggle-group",children:[i.jsxs("div",{className:"control-toggle-label",children:[i.jsx("span",{children:"Duty Cycle"}),i.jsx("span",{className:T("control-toggle-status",E?"text-accent-success":"text-text-muted"),children:E?"ON":"OFF"})]}),i.jsxs("button",{onClick:Z,className:T("control-btn w-full",E?"control-btn-success":"control-btn-neutral"),children:[i.jsx(At,{className:"w-4 h-4"}),i.jsx("span",{children:E?"Enabled":"Disabled"})]})]})]})})]}),He=()=>i.jsxs("div",{className:"mt-auto border-t border-white/5",children:[(t==null?void 0:t.uptime_seconds)!==void 0&&i.jsxs("div",{className:"px-4 py-3 flex items-center gap-2",children:[i.jsx(Wr,{className:"w-3.5 h-3.5 text-text-muted"}),i.jsxs("span",{className:"type-data-xs text-text-secondary tabular-nums",children:[ks(t.uptime_seconds)," uptime"]})]}),i.jsx("div",{className:"px-3 pb-3",children:i.jsx("div",{className:"bg-white/[0.03] rounded-xl p-3",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(oa,{className:"w-4 h-4 text-accent-primary"}),i.jsx("span",{className:"type-data-xs text-text-muted",children:"Noise Floor"})]}),i.jsx("span",{className:"type-data text-text-primary tabular-nums",children:x!=null?`${x.toFixed(0)} dBm`:"â€”"})]})})}),i.jsxs("div",{className:"px-4 py-3 flex items-center justify-between border-t border-white/5",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("span",{className:"relative flex h-2 w-2",children:[i.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-accent-success opacity-75"}),i.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-accent-success"})]}),i.jsx("span",{className:"type-data-xs text-text-muted uppercase tracking-wide",children:"Live"})]}),(t==null?void 0:t.version)&&i.jsxs("span",{className:"type-data-xs text-text-muted",children:["v",t.version]})]})]});return i.jsxs(i.Fragment,{children:[i.jsx("header",{className:"lg:hidden fixed top-0 inset-x-0 z-[10001] h-14 bg-bg-body/70 backdrop-blur-xl border-b border-white/10",children:i.jsxs("div",{className:"flex items-center justify-between h-full px-4",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-accent-primary/20 flex items-center justify-center overflow-hidden",children:i.jsx("img",{src:ke,alt:"",className:"w-5 h-5 object-contain"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-sm font-semibold text-text-primary",children:"pyMC Console"}),i.jsxs("p",{className:"type-data-xs text-text-muted",children:["v",be]})]})]}),i.jsx("button",{onClick:()=>h(!c),className:"w-10 h-10 flex items-center justify-center rounded-xl hover:bg-white/5 active:bg-white/10 transition-colors","aria-label":c?"Close menu":"Open menu",children:c?i.jsx(ga,{className:"w-5 h-5 text-text-primary"}):i.jsx(ea,{className:"w-5 h-5 text-text-primary"})})]})}),i.jsx("div",{className:T("lg:hidden fixed inset-0 z-[10002] bg-black/60 backdrop-blur-sm transition-opacity duration-300",c?"opacity-100":"opacity-0 pointer-events-none"),onClick:()=>h(!1),"aria-hidden":"true"}),i.jsxs("aside",{className:T("lg:hidden fixed top-0 left-0 z-[10003] w-72 max-w-[85vw] h-full","bg-bg-surface/80 backdrop-blur-2xl border-r border-white/10","flex flex-col","transform transition-transform duration-300 ease-out",c?"translate-x-0":"-translate-x-full pointer-events-none"),children:[i.jsxs("div",{className:"flex items-center gap-3 px-4 py-5 border-b border-white/5",children:[i.jsx("div",{className:"w-10 h-10 rounded-xl bg-accent-primary/20 flex items-center justify-center overflow-hidden",children:i.jsx("img",{src:ke,alt:"",className:"w-6 h-6 object-contain"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-sm font-semibold text-text-primary",children:"pyMC Console"}),i.jsxs("p",{className:"type-data-xs text-text-muted",children:["v",be]})]})]}),G(),P(),X(),He()]}),i.jsxs("aside",{className:"hidden lg:flex flex-col w-64 flex-shrink-0 h-screen sticky top-0 bg-bg-surface/70 backdrop-blur-2xl border-r border-white/10",children:[i.jsxs("div",{className:"flex items-center gap-3 px-5 py-6 border-b border-white/5",children:[i.jsx("div",{className:"w-10 h-10 rounded-xl bg-accent-primary/15 flex items-center justify-center overflow-hidden",children:i.jsx("img",{src:ke,alt:"",className:"w-6 h-6 object-contain"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-base font-semibold text-text-primary",children:"pyMC Console"}),i.jsxs("p",{className:"type-data-xs text-text-muted",children:["v",be]})]})]}),G(),P(),X(),He()]})]})}const Ss=u.memo(function(){const{theme:t}=_r(),{backgroundImage:n,brightness:r}=t,[a,s]=u.useState(n),[o,l]=u.useState(!1);u.useEffect(()=>{if(n===a)return;const c=new Image;c.onload=()=>{l(!0),requestAnimationFrame(()=>{s(n),setTimeout(()=>l(!1),300)})},c.onerror=()=>{s(n)},c.src=n},[n,a]);const d=(100-r)/100;return i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"fixed inset-0 -z-20",style:{contain:"paint",willChange:o?"opacity":"auto"},"aria-hidden":"true",children:i.jsx("div",{className:"absolute inset-0 bg-cover bg-center bg-no-repeat transition-opacity duration-300 ease-out",style:{backgroundImage:`url(${a})`,opacity:o?.7:1}})}),i.jsx("div",{className:"fixed inset-0 -z-10 bg-black pointer-events-none transition-opacity duration-200 ease-out",style:{opacity:d,contain:"paint"},"aria-hidden":"true"})]})});function S({className:e=""}){return i.jsx("div",{className:`bg-white/5 animate-pulse rounded-lg ${e}`,"aria-hidden":"true"})}function Cs(){return i.jsxs("div",{className:"section-gap","aria-label":"Loading dashboard",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx(S,{className:"h-8 w-48"}),i.jsx(S,{className:"h-8 w-32"})]}),i.jsx(S,{className:"h-72"}),i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-8 gap-3",children:Array.from({length:8}).map((e,t)=>i.jsx(S,{className:"h-24"},t))}),i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:Array.from({length:4}).map((e,t)=>i.jsx(S,{className:"h-44"},t))}),i.jsx(S,{className:"h-96"})]})}function Ee(){return i.jsxs("div",{className:"section-gap","aria-label":"Loading list",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx(S,{className:"h-8 w-40"}),i.jsx(S,{className:"h-8 w-24"})]}),i.jsx(S,{className:"h-20"}),i.jsxs("div",{className:"glass-card overflow-hidden",children:[i.jsx(S,{className:"h-10 rounded-none"}),i.jsx("div",{className:"divide-y divide-border-subtle/30",children:Array.from({length:10}).map((e,t)=>i.jsx("div",{className:"px-4 py-3",children:i.jsx(S,{className:"h-6"})},t))})]})]})}function Es(){return i.jsxs("div",{className:"section-gap","aria-label":"Loading map",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx(S,{className:"h-8 w-32"}),i.jsx(S,{className:"h-6 w-48"})]}),i.jsx(S,{className:"h-[500px]"}),i.jsx(S,{className:"h-64"})]})}function Ls(){return i.jsxs("div",{className:"section-gap","aria-label":"Loading charts",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx(S,{className:"h-8 w-36"}),i.jsx(S,{className:"h-8 w-40"})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[i.jsx(S,{className:"h-80"}),i.jsx(S,{className:"h-80"})]}),i.jsx(S,{className:"h-64"})]})}function Ns(){return i.jsxs("div",{className:"section-gap","aria-label":"Loading settings",children:[i.jsx(S,{className:"h-8 w-32"}),i.jsxs("div",{className:"space-y-6",children:[i.jsx(S,{className:"h-48"}),i.jsx(S,{className:"h-64"}),i.jsx(S,{className:"h-32"})]})]})}function Rs(){return i.jsxs("div",{className:"section-gap","aria-label":"Loading system info",children:[i.jsx(S,{className:"h-8 w-28"}),i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:Array.from({length:4}).map((e,t)=>i.jsx(S,{className:"h-28"},t))}),i.jsx(S,{className:"h-64"}),i.jsx(S,{className:"h-48"})]})}const js=u.lazy(()=>J(()=>import("./Dashboard-CSxt5VEV.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12]))),_s=u.lazy(()=>J(()=>import("./Packets-D34yCbQR.js"),__vite__mapDeps([13,1,2,4,5,6,7,14,15,11,8,16]))),Ps=u.lazy(()=>J(()=>import("./Contacts-CzxLMsvW.js").then(e=>e.a),__vite__mapDeps([17,1,2,5,7,10,18,9,6,11,15]))),Ts=u.lazy(()=>J(()=>import("./Statistics-DD7XviRR.js"),__vite__mapDeps([19,1,2,3,14,20,7,11,9]))),Ms=u.lazy(()=>J(()=>import("./System-7XaF83ds.js"),__vite__mapDeps([21,1,2,11,16,18]))),Is=u.lazy(()=>J(()=>import("./Logs-CtDl4GM6.js"),__vite__mapDeps([22,1,2,14,11,8,16,20,23]))),As=u.lazy(()=>J(()=>import("./Terminal-BEA-1vFi.js"),__vite__mapDeps([24,1,2]))),Ds=u.lazy(()=>J(()=>import("./Settings-Bd21IKk-.js"),__vite__mapDeps([25,1,2,6,11,23])));class $s extends u.Component{constructor(t){super(t),this.state={hasError:!1}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}render(){var t;return this.state.hasError?i.jsxs("div",{className:"glass-card p-8 text-center",children:[i.jsx("p",{className:"type-subheading text-accent-red mb-2",children:"Page failed to render"}),i.jsx("p",{className:"type-body text-white/50 mb-4",children:((t=this.state.error)==null?void 0:t.message)||"Unknown error"}),i.jsx("button",{onClick:()=>this.setState({hasError:!1}),className:"px-4 py-2 bg-accent-primary/20 text-accent-primary rounded-lg hover:bg-accent-primary/30 transition-colors",children:"Try Again"})]}):this.props.children}}function Os(){const e=ms();return u.useEffect(()=>{e()},[e]),i.jsxs(i.Fragment,{children:[i.jsx(Ss,{}),i.jsxs("div",{className:"flex min-h-screen",children:[i.jsx(vs,{}),i.jsx("main",{className:"flex-1 min-w-0 pt-14 lg:pt-0",children:i.jsx("div",{className:"h-full overflow-y-auto",children:i.jsx("div",{className:"p-4 sm:p-6 lg:p-8 max-w-7xl mx-auto",children:i.jsx($s,{children:i.jsxs(zn,{children:[i.jsx(H,{path:"/",element:i.jsx(u.Suspense,{fallback:i.jsx(Cs,{}),children:i.jsx(js,{})})}),i.jsx(H,{path:"/packets",element:i.jsx(u.Suspense,{fallback:i.jsx(Ee,{}),children:i.jsx(_s,{})})}),i.jsx(H,{path:"/contacts",element:i.jsx(u.Suspense,{fallback:i.jsx(Es,{}),children:i.jsx(Ps,{})})}),i.jsx(H,{path:"/statistics",element:i.jsx(u.Suspense,{fallback:i.jsx(Ls,{}),children:i.jsx(Ts,{})})}),i.jsx(H,{path:"/system",element:i.jsx(u.Suspense,{fallback:i.jsx(Rs,{}),children:i.jsx(Ms,{})})}),i.jsx(H,{path:"/logs",element:i.jsx(u.Suspense,{fallback:i.jsx(Ee,{}),children:i.jsx(Is,{})})}),i.jsx(H,{path:"/terminal",element:i.jsx(u.Suspense,{fallback:i.jsx(Ee,{}),children:i.jsx(As,{})})}),i.jsx(H,{path:"/settings",element:i.jsx(u.Suspense,{fallback:i.jsx(Ns,{}),children:i.jsx(Ds,{})})})]})})})})})]})]})}Yt.createRoot(document.getElementById("root")).render(i.jsx(u.StrictMode,{children:i.jsx(jr,{children:i.jsx(mr,{children:i.jsx(Os,{})})})}));export{Vs as $,ho as A,mo as B,Wr as C,Js as D,xo as E,bo as F,Eo as G,So as H,Co as I,Ma as J,Ia as K,Ae as L,Ys as M,Fr as N,co as O,ut as P,uo as Q,oa as R,Gs as S,Aa as T,no as U,ro as V,io as W,ga as X,lo as Y,qr as Z,J as _,to as a,Qs as a0,je as a1,Ws as a2,qs as a3,Da as a4,$a as a5,Oa as a6,fa as a7,_r as a8,Tt as a9,Us as aa,ua as ab,At as ac,jo as ad,_o as ae,yo as af,fo as ag,ps as ah,ao as b,R as c,oo as d,Zs as e,po as f,Rn as g,Xs as h,so as i,i as j,zs as k,ks as l,Pa as m,Lo as n,Ro as o,Ks as p,Oe as q,wo as r,ko as s,No as t,eo as u,Br as v,vo as w,go as x,gs as y,hs as z};
